System.register("chunks:///_virtual/AgoraSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AgoraRTC_N-production.mjs_cjs=&original=.js","./MicrophonePermissHandler.ts","./AgoraRTC_N-production.js"],(function(e){var n,t,r,o,c;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy},null,function(e){o=e.default},function(e){c=e.default}],execute:function(){r._RF.push({},"5032bRBc51Ow5jfkqgNf4YP","AgoraSDK",void 0),e("AgoraSDK",function(){function e(){this.client=null,this.localAudioTrack=null,this.config={appId:"",channel:"",token:"",uid:"",debug:!1}}e.getInstance=function(){return this.instance=this.instance||new e,this.instance};var r=e.prototype;return r.init=function(e){e.debug&&c.enableLogUpload(),this.config=e,console.log("【agora】初始化：",e),this.client=c.createClient({mode:"rtc",codec:"vp8"}),this.setupEventListeners()},r.setupEventListeners=function(){this.client&&(this.client.on("user-published",this.userPublished),this.client.on("user-unpublished",this.userUnPublished),this.client.on("connection-state-change",this.connectionStateChange),this.client.on("user-joined",this.userJoin),this.client.on("user-left",this.userLeft),this.client.on("network-quality",this.networkQuality))},r.userPublished=function(){var e=n(t().mark((function e(n,r){var o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.subscribe(n,r);case 3:console.log("subscribe success"),"audio"===r&&(o=n.audioTrack)&&o.play(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to subscribe to remote user:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),r.userUnPublished=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.connectionStateChange=function(){var e=n(t().mark((function e(n,r,o){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),r.userJoin=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("【agora】用户加入",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.userLeft=function(){var e=n(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("【agora】远程用户离线时",n);case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),r.networkQuality=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("【agora】网络质量",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.createLocalAudioTrack=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.createMicrophoneAudioTrack();case 3:this.localAudioTrack=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.error("Failed to create local audio track:",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),r.joinChannel=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.client||console.error("Client not initialized"),console.log("============",this.config),e.next=4,this.client.join(this.config.appId,this.config.channel,this.config.token,this.config.uid);case 4:return e.next=6,this.createLocalAudioTrack();case 6:return e.next=8,this.publishLocalAudio();case 8:console.log("Publish success!");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.publishLocalAudio=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client&&this.localAudioTrack){e.next=2;break}throw new Error("Client or local audio track not available");case 2:return e.prev=2,e.next=5,this.client.publish([this.localAudioTrack]);case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(2),console.error("Failed to publish local audio:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),r.leaveChannel=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.localAudioTrack&&(this.localAudioTrack.close(),this.localAudioTrack=null),!this.client){e.next=5;break}return e.next=5,this.client.leave();case 5:console.log("Left the channel."),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Failed to leave channel:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),r.toggleMute=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localAudioTrack){e.next=3;break}return console.warn("Local audio track not available"),e.abrupt("return",!1);case 3:if(e.prev=3,!this.localAudioTrack.enabled){e.next=11;break}return e.next=7,this.localAudioTrack.setEnabled(!1);case 7:return console.log("Audio muted"),e.abrupt("return",!1);case 11:return e.next=13,this.localAudioTrack.setEnabled(!0);case 13:return console.log("Audio unmuted"),e.abrupt("return",!0);case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(3),console.error("Failed to toggle mute:",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),r.getConnectionState=function(){var e;return(null==(e=this.client)?void 0:e.connectionState)||"DISCONNECTED"},r.destroy=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.leaveChannel();case 2:this.client=null;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.checkMicrophone=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.ensurePermission();case 2:if(e.sent){e.next=8;break}return console.error("麦克风权限不足"),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.requestPermission=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!0),e.next=3,o.requestPermission(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.initializeMicrophone=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.initializeMicrophone(!0);case 2:e.sent&&console.log("麦克风初始化成功");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.enableMicrophone=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.enableMicrophone();case 2:return(n=e.sent)&&console.log("麦克风已开启"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.disableMicrophone=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.disableMicrophone();case 2:return(n=e.sent)&&console.log("麦克风已关闭"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.toggleMicrophone=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.toggleMicrophone();case 2:n=e.sent,console.log("麦克风新状态:",n?"开启":"关闭");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.getMicrophoneState=function(){var e=o.getMicrophoneState();return console.log("当前麦克风状态:",e?"开启":"关闭"),e},r.isInitialized=function(){var e=o.isInitialized();return console.log("是否已初始化:",e),e},e}()).instance=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/AgoraSDK2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AgoraRTC_N-production.mjs_cjs=&original=.js","./AgoraRTC_N-production.js"],(function(e){var t,n,r,i;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},null,function(e){i=e.default}],execute:function(){r._RF.push({},"e8977RSLiJGHbRHTIDcNFzE","AgoraSDK2",void 0);e("AgoraSDK2",function(){function e(){this.client=null,this.localAudioTrack=null,this.config=null,this.isJoined=!1,this.isMicOn=!1,this.isMuted=!1,this.eventListeners=new Map,this.remoteUsers=new Map,this.volumeTimer=null,i.enableLogUpload()}var r=e.prototype;return r.initialize=function(){var e=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.config=t,this.client=i.createClient({mode:"rtc",codec:"vp8",role:t.role||"audience"}),this.setupClientEvents(),console.log("Agora SDK 初始化成功"),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.error("初始化 Agora SDK 失败:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),r.joinChannel=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client&&this.config){e.next=2;break}throw new Error("请先初始化 SDK");case 2:return e.prev=2,e.next=5,this.client.join(this.config.appId,this.config.channel,this.config.token||null,this.config.uid||null);case 5:this.isJoined=!0,this.startVolumeIndicator(),console.log("成功加入频道:",this.config.channel),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(2),console.error("加入频道失败:",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),r.leaveChannel=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.leaveMic();case 5:return e.next=7,this.client.leave();case 7:this.isJoined=!1,this.stopVolumeIndicator(),console.log("已离开频道"),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(2),console.error("离开频道失败:",e.t0),e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),r.joinMic=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client&&this.isJoined){e.next=2;break}throw new Error("请先加入频道");case 2:if(!this.isMicOn){e.next=5;break}return console.warn("已经上麦了"),e.abrupt("return");case 5:if(e.prev=5,"audience"!==this.client.role){e.next=9;break}return e.next=9,this.client.setClientRole("host");case 9:return e.next=11,i.createMicrophoneAudioTrack({encoderConfig:"music_standard"});case 11:return this.localAudioTrack=e.sent,e.next=14,this.client.publish([this.localAudioTrack]);case 14:this.isMicOn=!0,this.emit("microphone-state-change",!0),console.log("上麦成功"),e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(5),console.error("上麦失败:",e.t0),e.t0;case 23:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(){return e.apply(this,arguments)}}(),r.leaveMic=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMicOn&&this.localAudioTrack){e.next=3;break}return console.warn("当前未上麦"),e.abrupt("return");case 3:if(e.prev=3,!this.client){e.next=7;break}return e.next=7,this.client.unpublish([this.localAudioTrack]);case 7:this.localAudioTrack.close(),this.localAudioTrack=null,this.isMicOn=!1,this.isMuted=!1,this.emit("microphone-state-change",!1),console.log("下麦成功"),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(3),console.error("下麦失败:",e.t0),e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(){return e.apply(this,arguments)}}(),r.unmuteMic=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localAudioTrack){e.next=2;break}throw new Error("请先上麦");case 2:return e.prev=2,e.next=5,this.localAudioTrack.setEnabled(!0);case 5:this.isMuted=!1,console.log("开麦成功"),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("开麦失败:",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),r.muteMic=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localAudioTrack){e.next=2;break}throw new Error("请先上麦");case 2:return e.prev=2,e.next=5,this.localAudioTrack.setEnabled(!1);case 5:this.isMuted=!0,console.log("关麦成功"),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("关麦失败:",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),r.toggleMic=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMuted){e.next=5;break}return e.next=3,this.unmuteMic();case 3:e.next=7;break;case 5:return e.next=7,this.muteMic();case 7:return e.abrupt("return",!this.isMuted);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getRemoteUsers=function(){return Array.from(this.remoteUsers.values())},r.getRemoteUser=function(e){return this.remoteUsers.get(e)},r.getLocalUserInfo=function(){var e;return{uid:(null==(e=this.client)?void 0:e.uid)||null,audioTrack:this.localAudioTrack,isOnMic:this.isMicOn,isMuted:this.isMuted}},r.muteRemoteUser=function(){var e=t(n().mark((function e(t,r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.remoteUsers.get(t))&&i.audioTrack){e.next=4;break}return console.warn("用户 "+t+" 不存在或没有音频轨道"),e.abrupt("return");case 4:e.prev=4,i.audioTrack.setVolume(r?0:100),i.isMuted=r,console.log((r?"静音":"取消静音")+"用户 "+t),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),console.error((r?"静音":"取消静音")+"用户失败:",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}(),r.setRemoteUserVolume=function(){var e=t(n().mark((function e(t,r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.remoteUsers.get(t))&&i.audioTrack){e.next=4;break}return console.warn("用户 "+t+" 不存在或没有音频轨道"),e.abrupt("return");case 4:e.prev=4,r=Math.max(0,Math.min(100,r)),i.audioTrack.setVolume(r),console.log("设置用户 "+t+" 音量为 "+r),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),console.error("设置用户音量失败:",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}(),r.getStatus=function(){var e,t;return{isJoined:this.isJoined,isMicOn:this.isMicOn,isMuted:this.isMuted,remoteUserCount:this.remoteUsers.size,channel:(null==(e=this.config)?void 0:e.channel)||"",uid:(null==(t=this.client)?void 0:t.uid)||null}},r.on=function(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t)},r.off=function(e,t){var n=this.eventListeners.get(e);n&&n.delete(t)},r.destroy=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.stopVolumeIndicator(),e.next=4,this.leaveChannel();case 4:this.client&&(this.client.removeAllListeners(),this.client=null),this.eventListeners.clear(),this.remoteUsers.clear(),this.config=null,console.log("Agora SDK 已销毁"),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.error("销毁 SDK 失败:",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),r.setupClientEvents=function(){var e=this;this.client&&(this.client.on("user-joined",(function(t){console.log("用户加入:",t.uid),e.remoteUsers.set(t.uid,{uid:t.uid,audioTrack:null,isOnMic:!1,isMuted:!1,audioLevel:0}),e.emit("user-joined",t)})),this.client.on("user-left",(function(t,n){console.log("用户离开:",t.uid,n),e.remoteUsers.delete(t.uid),e.emit("user-left",t,n)})),this.client.on("user-published",t(n().mark((function t(r,i){var s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("用户发布媒体:",r.uid,i),"audio"!==i){t.next=13;break}return t.prev=2,t.next=5,e.client.subscribe(r,i);case 5:r.audioTrack&&r.audioTrack.play(),(s=e.remoteUsers.get(r.uid))&&(s.audioTrack=r.audioTrack,s.isOnMic=!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("订阅用户音频失败:",t.t0);case 13:"audio"!==i&&"video"!==i||e.emit("user-published",r,i);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))),this.client.on("user-unpublished",(function(t,n){if(console.log("用户取消发布媒体:",t.uid,n),"audio"===n){var r=e.remoteUsers.get(t.uid);r&&(r.audioTrack=null,r.isOnMic=!1)}"audio"!==n&&"video"!==n||e.emit("user-unpublished",t,n)})),this.client.on("connection-state-change",(function(t,n,r){console.log("连接状态变化:",t,n,r),e.emit("connection-state-change",t,n,r)})),this.client.on("network-quality",(function(t){e.emit("network-quality",t)})))},r.startVolumeIndicator=function(){var e=this;this.client&&(this.client.enableAudioVolumeIndicator(),this.client.on("volume-indicator",(function(t){t.forEach((function(t){var n=t.uid,r=t.level;if(n!==e.client.uid){var i=e.remoteUsers.get(n);i&&(i.audioLevel=r)}})),e.emit("volume-indicator",t)})))},r.stopVolumeIndicator=function(){this.volumeTimer&&(clearInterval(this.volumeTimer),this.volumeTimer=null)},r.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.eventListeners.get(e);i&&i.forEach((function(t){try{t.apply(void 0,n)}catch(t){console.error("事件监听器执行错误 ["+e+"]:",t)}}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var n,i,e,u;return{setters:[function(s){n=s.createClass},function(s){i=s.cclegacy,e=s.warn,u=s.log}],execute:function(){i._RF.push({},"8c48bBN521JzIxhITJunFji","AsyncQueue",void 0),s("AsyncQueue",function(){function s(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null}var i=s.prototype;return i.push=function(n,i){void 0===i&&(i=null);var e=s._$uuid_count++;return this._queues.push({uuid:e,callbacks:[n],params:i}),e},i.pushMulti=function(n){for(var i=s._$uuid_count++,e=arguments.length,u=new Array(e>1?e-1:0),t=1;t<e;t++)u[t-1]=arguments[t];return this._queues.push({uuid:i,callbacks:u,params:n}),i},i.remove=function(s){var n;if((null==(n=this._runningAsyncTask)?void 0:n.uuid)!==s){for(var i=0;i<this._queues.length;i++)if(this._queues[i].uuid===s){this._queues.splice(i,1);break}}else e("正在执行的任务不可以移除")},i.clear=function(){this._queues=[],this._isProcessingTaskUUID=0,this._runningAsyncTask=null},i.step=function(){this.isProcessing&&this.next(this._isProcessingTaskUUID)},i.play=function(s){var n=this;if(void 0===s&&(s=null),!this.isProcessing&&this._enable){var i=this._queues.shift();if(i){this._runningAsyncTask=i;var e=i.uuid;this._isProcessingTaskUUID=e;var u=i.callbacks;if(1==u.length){u[0]((function(s){void 0===s&&(s=null),n.next(e,s)}),i.params,s)}else for(var t=u.length,r=[],c=function(s){void 0===s&&(s=null),--t,r.push(s||null),0===t&&n.next(e,r)},l=t,a=0;a<l;a++)u[a](c,i.params,s)}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(s)}},i.yieldTime=function(s,n){void 0===n&&(n=null);this.push((function(i,e,u){var t=setTimeout((function(){clearTimeout(t),n&&n(),i(u)}),s)}),{des:"AsyncQueue.yieldTime"})},i.next=function(s,n){void 0===n&&(n=null),this._isProcessingTaskUUID===s?(this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.play(n)):this._runningAsyncTask&&u(this._runningAsyncTask)},s.excuteTimes=function(s,n){void 0===n&&(n=null);var i=s;return function(){0===--i&&n&&n()}},n(s,[{key:"queues",get:function(){return this._queues}},{key:"enable",get:function(){return this._enable},set:function(s){this._enable!==s&&(this._enable=s,s&&this.size>0&&this.play())}},{key:"size",get:function(){return this._queues.length}},{key:"isProcessing",get:function(){return this._isProcessingTaskUUID>0}},{key:"isStop",get:function(){return!(this._queues.length>0)&&!this.isProcessing}},{key:"runningParams",get:function(){return this._runningAsyncTask?this._runningAsyncTask.params:null}}]),s}())._$uuid_count=1,i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,c=t.AudioSource}],execute:function(){var i;e._RF.push({},"e52d2ysY1BEbpcT2Cz0Wwss","AudioEffect",void 0);var r=n.ccclass;t("AudioEffect",r("AudioEffect")(i=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return(o=t.call.apply(t,[this].concat(n))||this).onComplete=null,o}o(e,t);var n=e.prototype;return n.start=function(){this.node.on(c.EventType.ENDED,this.onAudioEnded,this)},n.onAudioEnded=function(){this.onComplete&&this.onComplete()},e}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioEffect.ts","./HeronApp.ts"],(function(e){var t,n,o,s,i,r,u,c,f;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,i=e.AudioClip,r=e.NodePool,u=e.Node},function(e){c=e.AudioEffect},function(e){f=e.HeronApp}],execute:function(){s._RF.push({},"01278BDjrtCr4CBpmO5DZlN","AudioEffectPool",void 0);e("AudioEffectPool",function(){function e(){this._switch=!0,this._volume=1,this.pool=new r,this.effects=new Map,this.res=new Map,this._aeId=0}var s=e.prototype;return s.getAeId=function(){return 3e4==this._aeId&&(this._aeId=1),this._aeId++,this._aeId},s.load=function(){var e=n(o().mark((function e(t,s,r){var a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=f.res.defaultBundleName),e.abrupt("return",new Promise(n(o().mark((function e(n,l){var p,h,d,v,m,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.switch){e.next=2;break}return e.abrupt("return",n(-1));case 2:if(!(t instanceof i)){e.next=6;break}p=t,e.next=13;break;case 6:if(null!=(p=f.res.get(t,i,s))){e.next=13;break}return null==(h=a.res.get(s))?(h=[],a.res.set(s,h),h.push(t)):-1==h.indexOf(t)&&h.push(t),e.next=12,f.res.loadAsync(s,t,i);case 12:p=e.sent;case 13:if(p.isValid){e.next=16;break}return n(-1),e.abrupt("return");case 16:d=a.getAeId(),v=t instanceof i?t.uuid:s+"_"+t,v+="_"+d,_=null,0==a.pool.size()?((_=new u).name="AudioEffect",_.parent=f.audio.node,m=_.addComponent(c)):(_=a.pool.get(),m=_.getComponent(c)),m.onComplete=function(){a.put(d,t,s),r&&r()},a.effects.set(v,m),m.volume=a.volume,m.clip=p,m.play(),n(d);case 27:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),s.put=function(e,t,n){var o;void 0===n&&(n=f.res.defaultBundleName),o=t instanceof i?t.uuid:n+"_"+t,o+="_"+e;var s=this.effects.get(o);s&&s.clip&&(this.effects.delete(o),s.stop(),this.pool.put(s.node))},s.release=function(){this.effects.forEach((function(e){e.node.destroy()})),this.effects.clear(),this.res.forEach((function(e,t){e.forEach((function(e){return f.res.release(e,t)}))})),this.pool.clear()},s.stop=function(){this.effects.forEach((function(e){e.stop()}))},s.play=function(){this.switch&&this.effects.forEach((function(e){e.play()}))},s.pause=function(){this.switch&&this.effects.forEach((function(e){e.pause()}))},t(e,[{key:"switch",get:function(){return this._switch},set:function(e){this._switch=e,e&&this.stop()}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e,this.effects.forEach((function(t){t.volume=e}))}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioEffectPool.ts","./AudioMusic.ts","./HeronApp.ts"],(function(t){var s,i,e,c,o,u,n;return{setters:[function(t){s=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,c=t.Component},function(t){o=t.AudioEffectPool},function(t){u=t.AudioMusic},function(t){n=t.HeronApp}],execute:function(){e._RF.push({},"252f0z+vPNL8Y/jsLYmomtw","AudioManager",void 0);var f="game_audio",a=window;t("AudioManager",function(t){function e(){for(var s,i=arguments.length,e=new Array(i),c=0;c<i;c++)e[c]=arguments[c];return(s=t.call.apply(t,[this].concat(e))||this).music=null,s.effect=new o,s.local_data={},s}s(e,t);var c=e.prototype;return c.setMusicComplete=function(t){void 0===t&&(t=null),this.music.onComplete=t},c.playCommonMusic=function(t,s,i){void 0===s&&(s=!1),this.music.switch&&(this.music.loop=s,this.music.load(t,i,n.res.defaultBundleName).then().catch((function(t){console.log("error:",t)})))},c.playMusic=function(t,s,i,e){void 0===s&&(s=!1),this.music.switch&&(this.music.loop=s,this.music.load(t,i,a.bundle).then().catch((function(t){console.log("error:",t)})))},c.stopMusic=function(){this.music.switch&&this.music.playing&&this.music.stop()},c.playCommonEffect=function(t,s){return this.effect.load(t,n.res.defaultBundleName,s)},c.playEffect=function(t,s){return this.effect.load(t,a.bundle,s)},c.putCommonEffect=function(t,s){this.effect.put(t,s,n.res.defaultBundleName)},c.putEffect=function(t,s,i){this.effect.put(t,s,i)},c.resumeAll=function(){!this.music.playing&&this.music.progress>0&&this.music.play(),this.effect.play()},c.pauseAll=function(){this.music.playing&&this.music.pause(),this.effect.pause()},c.stopAll=function(){this.music.stop(),this.effect.stop()},c.save=function(){this.local_data.volume_music=this.music.volume,this.local_data.volume_effect=this.effect.volume,this.local_data.switch_music=this.music.switch,this.local_data.switch_effect=this.effect.switch,n.storage.set(f,this.local_data)},c.load=function(){if(this.music=this.getComponent(u)||this.addComponent(u),this.local_data=n.storage.getJson(f),this.local_data)try{this.setState()}catch(t){this.setStateDefault()}else this.setStateDefault()},c.setState=function(){this.music.volume=this.local_data.volume_music,this.effect.volume=this.local_data.volume_effect,this.music.switch=this.local_data.switch_music,this.effect.switch=this.local_data.switch_effect},c.setStateDefault=function(){this.local_data={},this.music.volume=1,this.effect.volume=1,this.music.switch=!0,this.effect.switch=!0},i(e,[{key:"progressMusic",get:function(){return this.music.progress},set:function(t){this.music.progress=t}},{key:"volumeMusic",get:function(){return this.music.volume},set:function(t){this.music.volume=t,this.save()}},{key:"switchMusic",get:function(){return this.music.switch},set:function(t){this.music.switch=t,t||this.music.stop(),this.save()}},{key:"volumeEffect",get:function(){return this.effect.volume},set:function(t){this.effect.volume=t,this.save()}},{key:"switchEffect",get:function(){return this.effect.switch},set:function(t){this.effect.switch=t,t||this.effect.stop(),this.save()}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts"],(function(e){var n,t,i,r,s,o,u,c,a;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass,i=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,o=e._decorator,u=e.AudioSource,c=e.AudioClip},function(e){a=e.HeronApp}],execute:function(){var l;s._RF.push({},"5c1f3kqGetBiIv48/CvuaQv","AudioMusic",void 0);var d=o.ccclass;o.menu,e("AudioMusic",d("AudioMusic")(l=function(e){function s(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(n=e.call.apply(e,[this].concat(i))||this).switch=!0,n.onComplete=null,n._progress=0,n._isLoading=!1,n._nextBundleName=null,n._nextUrl=null,n}n(s,e);var o=s.prototype;return o.start=function(){this.node.on(u.EventType.ENDED,this.onAudioEnded,this)},o.onAudioEnded=function(){this.onComplete&&this.onComplete()},o.load=function(){var e=i(r().mark((function e(n,t,i){var s,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=a.res.defaultBundleName),!this._isLoading){e.next=5;break}return this._nextBundleName=i,this._nextUrl=n,e.abrupt("return");case 5:this._isLoading=!0,s=function(e){o._isLoading=!1,null!=o._nextUrl?(o.load(o._nextUrl,t,o._nextBundleName),o._nextBundleName=o._nextUrl=null):(t&&t(),o.playing&&o.stop(),o.release(),o.clip=e,o.play())},a.res.loadAsync(i,n,c).then((function(e){e&&s(e)})).catch((function(e){console.error("加载音乐失败:",e.message),o._isLoading=!1,a.res.loadAsync(a.res.defaultBundleName,n,c).then((function(e){e&&s(e)})).catch((function(e){console.error("加载音乐失败:",e.message),o._isLoading=!1}))}));case 8:case"end":return e.stop()}}),e,this)})));return function(n,t,i){return e.apply(this,arguments)}}(),o.release=function(){this.clip&&(this.stop(),this.clip.decRef(),this.clip=null)},t(s,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(e){this._progress=e,this.currentTime=e*this.duration}}]),s}(u))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/BaseCtrl.ts",["cc","./HeronApp.ts","./NetDefine.ts"],(function(e){var t,n,o;return{setters:[function(e){t=e.cclegacy},function(e){n=e.HeronApp},function(e){o=e.default}],execute:function(){t._RF.push({},"26f0bKpFb1L34EsCksqFhNI","BaseCtrl",void 0);e("default",function(){function e(e){this.model=void 0,this.model=e,this.model.init(),this.init()}var t=e.prototype;return t.init=function(){this.registerHandler()},t.onDestroy=function(){this.removeHandler()},t.registerHandler=function(){n.message.on(o.GAME_SHOW,this),n.message.on(o.GAME_HIDE,this),n.message.on(o.JOIN_ROOM_RQ,this)},t.removeHandler=function(){n.message.off(o.GAME_SHOW,this),n.message.off(o.GAME_HIDE,this),n.message.off(o.JOIN_ROOM_RQ,this)},t.dealJoinRoom=function(e){console.log("dealJoinRoom",e)},t.dealData=function(e,t){switch(e){case o.JOIN_ROOM_RQ:this.model.netJoinGame(t)}},t.onHandleEvent=function(e,t){switch(this.dealData(e,t),e){case o.JOIN_ROOM_RQ:this.dealJoinRoom(t)}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./EventMessage.ts"],(function(n){var t,e,o,s,i,r,c,a;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,s=n.game,i=n.Game,r=n.Component},function(n){c=n.HeronApp},function(n){a=n.EventMessage}],execute:function(){e._RF.push({},"a8f42vNpmVFTaGWAWailKyy","BaseEntry",void 0);o.ccclass,o.property,n("BaseEntry",function(n){function e(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))||this).persist=null,t}t(e,n);var o=e.prototype;return o.__preload=function(){c.ui.init(this.node)},o.onLoad=function(){s.on(i.EVENT_SHOW,this.onShow,this),s.on(i.EVENT_HIDE,this.onHide,this)},o.onDestroy=function(){},o.onShow=function(){c.message.dispatchEvent(a.GAME_SHOW)},o.onHide=function(){c.message.dispatchEvent(a.GAME_HIDE)},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./NetDefine.ts","./AsyncQueue.ts"],(function(e){var s,o,n,t,r,i,a,c,u,l,p,g,d,f;return{setters:[function(e){s=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,u=e.ProgressBar,l=e.Label,p=e.Component},function(e){g=e.HeronApp},function(e){d=e.default},function(e){f=e.AsyncQueue}],execute:function(){var h,m,v,_,L,R,S;a._RF.push({},"f1af2Sv25hEEJUxOIrtu7eP","BaseLoading",void 0);var y=c.ccclass,b=c.property,C=window;e("BaseLoading",(h=y("BaseLoading"),m=b(u),v=b(l),h((R=s((L=function(e){function s(){for(var s,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return s=e.call.apply(e,[this].concat(r))||this,n(s,"progressBar",R,t(s)),n(s,"progressLabel",S,t(s)),s._loadSuccess=!1,s._joinSuccess=!1,s}o(s,e);var a=s.prototype;return a.__preload=function(){this.init(),this.loadRes(),this.addEventListener()},a.onDestroy=function(){this.removeEventListener()},a.init=function(){this.progressBar&&(this.progressBar.progress=0),this.progressLabel&&(this.progressLabel.string="0%")},a.addEventListener=function(){g.message.on(d.JOIN_ROOM_RQ,this)},a.removeEventListener=function(){g.message.off(d.JOIN_ROOM_RQ,this)},a.loadRes=function(){var e=new f;this.loadCommon(e),this.loadLanguage(e),this.onComplete(e),this.loadGameRes(e),this._loadCustomRes(e),e.play()},a.loadCommon=function(e){var s=this;e.push((function(e,o,n){g.res.loadDir("common",(function(e,s,o){}),(function(){g.message.dispatchEvent(d.CLIENT_START_CONNECT),e(),s.updateProgress(.2)}))}))},a.loadLanguage=function(e){var s=this;e.push((function(e,o,n){var t=g.storage.get("language");null!=t&&""!=t||(t="en",g.storage.set("language",t)),g.language.setLanguage(t,(function(){e(),s.updateProgress(.4)}))}))},a.loadGameRes=function(e){var s=this;e.push((function(e,o,n){g.res.loadDir(C.bundle,"res",(function(){s.updateProgress(.75),s.playMusic(),e()}))}))},a._loadCustomRes=function(e){var s=this;e.push((function(e,o,n){s.updateProgress(1),s.loadCustomRes(e)}))},a.updateProgress=function(e){void 0===e&&(e=0),this.progressBar.progress=e,this.progressLabel.string=(100*e).toFixed(0)+"%"},a.onComplete=function(e){var s=this;e.complete=r(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading complete"),s._loadSuccess=!0,s.loadSuccess(),e.abrupt("return");case 5:case"end":return e.stop()}}),e)})))},a.checkLoadSuccess=function(){!this._loadSuccess||this._joinSuccess?this._loadSuccess||!this._joinSuccess?this._loadSuccess&&this._joinSuccess&&this.loadSuccess():console.warn("JoinRoom已经返回，等待游戏资源加载"):console.warn("游戏资源加载成功，等待JoinRoom返回")},a.onHandleEvent=function(e,s){switch(e){case d.JOIN_ROOM_RQ:console.log("加入房间成功:",s),this._joinSuccess=!0,this.checkLoadSuccess()}},a.playMusic=function(){g.log.error("播放背景音乐， 子类需要重写该方法")},a.setProgress=function(e){void 0===e&&(e=0);var s=.75+.25*e;this.updateProgress(s)},a.loadCustomRes=function(e){},a.loadSuccess=function(){g.log.error("加载完成，开始进入游戏内容加载界面， 子类需要重写该方法")},s}(p)).prototype,"progressBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=s(L.prototype,"progressLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=L))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseModel.ts",["cc"],(function(n){var i;return{setters:[function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"a7db97WzTNMgqUFDojQFd0j","BaseModel",void 0);n("default",function(){function n(){this.gameInfo=null,this.isMidwayJoin=!1}var i=n.prototype;return i.init=function(){},i.destroy=function(){},i.setIsMidwayJoin=function(n){this.isMidwayJoin=n},i.getIsMidwayJoin=function(){return this.isMidwayJoin},i.netJoinGame=function(n){return this.gameInfo=n,this.gameInfo},n}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseNetCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./NetDefine.ts","./WebsocketTips.ts","./WebsocketHelper.ts","./test.ts","./AgoraSDK.ts","./HttpHelper.ts"],(function(e){var t,n,a,o,s,i,r,c,u,l,g,f,I;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,i=e.Component},function(e){r=e.HeronApp},function(e){c=e.default},function(e){u=e.WebsocketTips},function(e){l=e.default},function(e){g=e.GameCloudTokenGenerator},function(e){f=e.AgoraSDK},function(e){I=e.default}],execute:function(){var h;o._RF.push({},"05138bv5l9A7of4kWdLK8+o","BaseNetCtrl",void 0);var p=s.ccclass;s.property,e("BaseNetCtrl",p("BaseNetCtrl")(h=function(e){function o(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).AgoraSDK=f.getInstance(),t}t(o,e);var s=o.prototype;return s.onLoad=function(){this.init()},s.onDestroy=function(){this.removeEventListener()},s.addEventListener=function(){r.message.on(c.HTTP_GAME_CONFIG,this),r.message.on(c.CLIENT_START_CONNECT,this),r.message.on(c.CONNECT_SUCCESS,this),r.message.on(c.JOIN_ROOM_RQ,this)},s.removeEventListener=function(){r.message.off(c.HTTP_GAME_CONFIG,this),r.message.off(c.CLIENT_START_CONNECT,this),r.message.off(c.CONNECT_SUCCESS,this),r.message.off(c.JOIN_ROOM_RQ,this)},s.init=function(){var e=n(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.webSocket.init(new u,new l),this.addEventListener(),t={server:"http://8.220.188.61:28080"},r.http.init(t,new I),r.data.getData("gameID"),r.data.getData("userID"),r.data.getData("roomID");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.gameInit=function(e){var t=this;r.data.setData("gameConfig",e),this.AgoraSDK.init({appId:e.agora_app_id,channel:e.voice_channel,token:e.agora_token,uid:2}),this.scheduleOnce((function(){t.AgoraSDK.joinChannel()}),1),this.connectServer(e.ws_connect_url)},s.requestGameConfig=function(){var e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXIiOiJhIiwiZXhwIjoxNzUyOTg1MTg3LCJpYXQiOjE3NTI4OTg3ODcsIm5pY2tuYW1lIjoiYSIsInVpZCI6Mn0.adSqH5q5Ip0w1VjWVYmVRh-5OhUlcLiJXTsbL6Visl0";r.data.setData("token",e),r.http.sendMsg({msg:c.HTTP_GAME_CONFIG,method:"GET"},e)},s.connectServer=function(e){var t=r.data.getData("gameID"),n=r.data.getData("userID"),a=r.data.getData("roomID"),o={uid:n,username:"我是username",nickname:"我是nickname",avatar:"avatar",balance:1e3,level:0,exp:0},s=g.generateToken(o,t);console.log(s);var i={url:"ws://192.168.3.47:8083/ws/connect?token="+s+"&gameID="+t+"&userID="+n+"&roomID="+a,autoReconnect:0};r.webSocket.connect(i)},s.dealJoinRoom=function(){var e=r.data.getData("roomID");r.webSocket.sendMsg(c.JOIN_ROOM_RQ,{room_id:e})},s.onHandleEvent=function(e,t){switch(e){case c.GAME_SHOW:case c.GAME_SHOW:break;case c.HTTP_GAME_CONFIG:console.log("返回wss地址：HTTP_GAME_CONFIG:",t),this.gameInit(t);break;case c.CLIENT_START_CONNECT:console.log("开始连接服务器");break;case c.CONNECT_SUCCESS:console.log("websocket链接成功:",t),this.dealJoinRoom();break;case c.JOIN_ROOM_RQ:console.log("加入房间成功:",t)}},s.update=function(e){},o}(i))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/BundleManager.ts",["cc","./HeronApp.ts"],(function(n){var e,t,c,o;return{setters:[function(n){e=n.cclegacy,t=n.assetManager,c=n.director},function(n){o=n.HeronApp}],execute:function(){e._RF.push({},"0eae3sQJI5MeK5Nk081v5Va","BundleManager",void 0),n("default",function(){function n(){}n.getInstance=function(){return n.instance||(n.instance=new n),n.instance};var e=n.prototype;return e.loadScene=function(n,e){t.loadBundle(n,(function(n,t){return e(n,t)}))},e.enterScene=function(n){c.loadScene(n,(function(e){e?console.error("Failed to load scene: "+n,e):o.log.info("Scene loaded successfully: "+n)}))},n}()).instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/Collection.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,a,i;return{setters:[function(t){r=t.inheritsLoose,e=t.createClass,a=t.wrapNativeSuper},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1dcf5AtQQVK3KQ/2jHHD5gi","Collection",void 0);t("Collection",function(t){function a(){for(var r,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(r=t.call.apply(t,[this].concat(a))||this)._array=[],r}r(a,t);var i=a.prototype;return i.set=function(r,e){if(this.has(r)){var a=this.get(r),i=this._array.indexOf(a);this._array[i]=e}else this._array.push(e);return t.prototype.set.call(this,r,e)},i.delete=function(r){var e=this.get(r);if(e){var a=this._array.indexOf(e);return a>-1&&this._array.splice(a,1),t.prototype.delete.call(this,r)}return!1},i.clear=function(){this._array.splice(0,this._array.length),t.prototype.clear.call(this)},e(a,[{key:"array",get:function(){return this._array}}]),a}(a(Map)));i._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts","./HeronApp.ts"],(function(n){var t,e,o,i,c,l,a,r,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,l=n._decorator,a=n.Component},function(n){r=n.LanguageLabel},function(n){s=n.HeronApp}],execute:function(){var u,f,p,h,b,g,d,m,_,y,C;c._RF.push({},"653bf8VPC5Fn49zFJFqXVgx","CommonPrompt",void 0);var F=l.ccclass,k=l.property;n("CommonPrompt",(u=F("CommonPrompt"),f=k(r),p=k(r),h=k(r),b=k(r),u((m=t((d=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),l=0;l<e;l++)c[l]=arguments[l];return t=n.call.apply(n,[this].concat(c))||this,o(t,"lab_title",m,i(t)),o(t,"lab_content",_,i(t)),o(t,"lab_ok",y,i(t)),o(t,"lab_cancel",C,i(t)),t.config={},t}e(t,n);var c=t.prototype;return c.onAdded=function(n){return this.config=n||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0,!0},c.setTitle=function(){this.lab_title.dataID=this.config.title},c.setContent=function(){this.lab_content.dataID=this.config.content},c.setBtnOkLabel=function(){this.lab_ok.dataID=this.config.okWord},c.setBtnCancelLabel=function(){this.lab_cancel&&(this.lab_cancel.dataID=this.config.cancelWord,this.lab_cancel.node.parent.active=this.config.needCancel||!1)},c.onOk=function(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()},c.onClose=function(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()},c.onCancel=function(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()},c.close=function(){s.ui.removeByNode(this.node)},c.onDestroy=function(){this.config=null},t}(a)).prototype,"lab_title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"lab_content",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"lab_ok",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(d.prototype,"lab_cancel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./UIConfig2.ts","./Toggle.ts","./AgoraSDK.ts"],(function(n){var t,e,o,i,r,c,a,s,u,l,p,f,h,g,m,d;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized,r=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){a=n.cclegacy,s=n._decorator,u=n.Node,l=n.tween,p=n.Vec3,f=n.Component},function(n){h=n.HeronApp},function(n){g=n.COMMONUIID},function(n){m=n.Toggle},function(n){d=n.AgoraSDK}],execute:function(){var w,C,v,y,b,B,k,D,A;a._RF.push({},"5f1ccq1V8tHyKBfzaX14NDD","CommonUI",void 0);var M=s.ccclass,I=s.property;n("CommonUI",(w=M("CommonUI"),C=I({type:u,tooltip:"chat 按钮"}),v=I({type:u,tooltip:"mic 按钮"}),y=I({type:u,tooltip:"follow 按钮"}),w((k=t((B=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(t=n.call.apply(n,[this].concat(r))||this).AgoraSDK=d.getInstance(),o(t,"chatBtn",k,i(t)),o(t,"micBtn",D,i(t)),o(t,"followBtn",A,i(t)),t}e(t,n);var a=t.prototype;return a.onLoad=function(){this.init()},a.onDestroy=function(){},a.init=function(){var n=r(c().mark((function n(){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.AgoraSDK.checkMicrophone();case 2:t=n.sent,console.log("【agora】 麦克风权限："+t),h.ui.toast("【agora】 麦克风权限："+t),this.initUI();case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.initUI=function(){this.chatBtn.getComponent(m).enable(!1);var n=this.AgoraSDK.getMicrophoneState();this.micBtn.getComponent(m).enable(n)},a.onClickPlayers=function(){h.ui.open(g.playersView,null,{onAdded:function(n,t){l(n).to(.2,{position:new p(0,0,1)}).start()},onBeforeRemove:function(n,t){l(n).to(.2,{position:new p(0,-2e3,1)}).call(t()).start()}})},a.onClickTopMenu=function(){h.ui.open(g.topMenu,null,{onAdded:function(n,t){l(n).to(.2,{position:new p(0,0,1)}).start()},onBeforeRemove:function(n,t){l(n).to(.2,{position:new p(0,2e3,1)}).call(t()).start()}})},a.onClickInviteFriends=function(){h.ui.open(g.inviteFriends,null,{onAdded:function(n,t){l(n).to(.2,{position:new p(0,0,1)}).start()},onBeforeRemove:function(n,t){l(n).to(.2,{position:new p(0,2e3,1)}).call(t()).start()}})},a.onClickChat=function(n,t){this.chatBtn.getComponent(m).onToggleClick()},a.onClickMic=function(){var n=r(c().mark((function n(t,e){var o,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=this.micBtn.getComponent(m).getChecked(),n.next=3,this.AgoraSDK.checkMicrophone();case 3:i=n.sent,console.log("【agora】 麦克风权限：",i,o),i?o?this.disableMicrophone():this.enableMicrophone():(console.log("未开启麦克风权限需求申请麦克风权限"),h.ui.toast("未开启麦克风权限需求申请麦克风权限"),this.AgoraSDK.requestPermission(!0));case 6:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}(),a.onClickFollow=function(n,t){this.followBtn.getComponent(m).onToggleClick()},a.enableMicrophone=function(){var n=r(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("开启麦克风"),n.next=3,this.AgoraSDK.enableMicrophone();case 3:n.sent&&this.micBtn.getComponent(m).enable(!0);case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.disableMicrophone=function(){var n=r(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("关闭麦克风"),n.next=3,this.AgoraSDK.disableMicrophone();case 3:n.sent&&this.micBtn.getComponent(m).enable(!1);case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a.update=function(n){},t}(f)).prototype,"chatBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(B.prototype,"micBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(B.prototype,"followBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"a906c8SsyxMrI3pxO4CeqSl","DataManager",void 0),t("default",function(){function t(){this.data={}}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.setData=function(t,n){this.data[t]=n},n.getData=function(t){return this.data[t]},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResLoader.ts","./HeronApp.ts"],(function(e){var n,o,t,s,r,i,a,c;return{setters:[function(e){n=e.inheritsLoose,o=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){s=e.cclegacy,r=e._decorator,i=e.Component},function(e){a=e.ResLoader},function(e){c=e.HeronApp}],execute:function(){var l;s._RF.push({},"8dc5dBryU9FK6vDlqxsJsbY","DelegateComponent",void 0);var p=r.ccclass;e("DelegateComponent",p("DelegateComponent")(l=function(e){function s(){for(var n,o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];return(n=e.call.apply(e,[this].concat(t))||this).vp=null,n.onCloseWindowBefore=null,n.onCloseWindow=null,n}n(s,e);var r=s.prototype;return r.add=function(){var e=this;return new Promise(o(t().mark((function n(o,s){var r,i,a;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<e.node.components.length)){n.next=14;break}if(i=e.node.components[r],!(a=i.onAdded)){n.next=11;break}return n.next=7,a.call(i,e.vp.params);case 7:if(n.t0=n.sent,0!=n.t0){n.next=11;break}return o(!1),n.abrupt("return");case 11:r++,n.next=1;break;case 14:"function"==typeof e.vp.callbacks.onAdded&&e.vp.callbacks.onAdded(e.node,e.vp.params),o(!0);case 16:case"end":return n.stop()}}),n)}))))},r.remove=function(e){this.vp.valid?(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,this.onBeforeRemoveNext.bind(this,e)):this.removed(this.vp,e)):this.removed(this.vp,e)},r.onBeforeRemoveNext=function(e){this.onCloseWindowBefore&&(this.onCloseWindowBefore(),this.onCloseWindowBefore=null),this.removed(this.vp,e)},r.removed=function(e,n){e.valid=!1,e.callbacks&&"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.onCloseWindow&&this.onCloseWindow(e),n?(this.node.destroy(),a.getInstance().release(e.config.prefab,e.config.bundle),e.config.auto&&c.ui.setConfig(e.uiid,null)):this.node.removeFromParent(),this.applyComponentsFunction(this.node,"onRemoved",this.vp.params)},r.onDestroy=function(){this.vp=null},r.applyComponentsFunction=function(e,n,o){for(var t=0;t<e.components.length;t++){var s=e.components[t],r=s[n];r&&r.call(s,o)}},s}(i))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"35f98wEeV1CV7k/g/Vjn8ec","EventMessage",void 0);var t=E("EventMessage",(function(){}));t.GAME_SHOW="GAME_ENTER",t.GAME_HIDE="GAME_EXIT",t.GAME_RESIZE="GAME_RESIZE",t.GAME_FULL_SCREEN="GAME_FULL_SCREEN",t.GAME_ORIENTATION="GAME_ORIENTATION",e._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"75e15Vq+hBE2bhlOZCc3n31","GameConfig",void 0);e("gameList",new Map([[10001,"bato"],[10002,"demo"]]));t._RF.pop()}}}));

System.register("chunks:///_virtual/HeronApp.ts",["cc","./Logger.ts","./BundleManager.ts","./MessageManager.ts","./QueryManager.ts","./StorageManager.ts","./RandomManager.ts","./UIManager.ts","./Language.ts","./ResLoader.ts","./AudioManager.ts","./NodePoolManager.ts","./HttpManager.ts","./WebSocketManager.ts","./TimerManager.ts","./DataManager.ts","./MetMsgManager.ts","./RootComponent.ts","./BaseEntry.ts","./AsyncQueue.ts","./StringUtil.ts"],(function(n){var t,e,o,a,s,i,r,u,c,g,d,f,l,p,M,I,m,y,A;return{setters:[function(n){t=n.cclegacy,e=n.Node,o=n.director},function(n){a=n.Logger},function(n){s=n.default},function(n){i=n.default},function(n){r=n.default},function(n){u=n.default},function(n){c=n.RandomManager},function(n){g=n.default},function(n){d=n.LanguageManager},function(n){f=n.ResLoader},function(n){l=n.AudioManager},function(t){p=t.NodePoolManager,n("NodePool",t.NodePool)},function(n){M=n.default},function(n){I=n.default},function(n){m=n.TimerManager},function(n){y=n.default},function(n){A=n.default},function(t){n("RootComponent",t.RootComponent)},function(t){n("BaseEntry",t.BaseEntry)},function(t){n("AsyncQueue",t.AsyncQueue)},function(t){n("StringUtil",t.StringUtil)}],execute:function(){t._RF.push({},"9617fXMheJG3b0nOesyitEz","HeronApp",void 0);var R=n("HeronApp",function(){function n(){this.persist=null,console.log("HeronApp constructor")}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.init=function(){n.log.logConfig("HeronApp is initializing..."),this.persist=new e("PersistNode"),o.addPersistRootNode(this.persist),n.audio=this.persist.addComponent(l),n.audio.load(),n.timer=this.persist.addComponent(m)},n}());R.instance=void 0,R.log=a.getInstance(),R.bundle=s.getInstance(),R.query=r.getInstance(),R.message=i.getInstance(),R.storage=u.getInstance(),R.random=c.getInstance(),R.nodePool=p.getInstance(),R.res=f.getInstance(),R.ui=g.getInstance(),R.timer=void 0,R.language=new d,R.audio=void 0,R.http=M.getInstance(),R.webSocket=I.getInstance(),R.data=y.getInstance(),R.netMsg=A.getInstance(),"undefined"!=typeof window&&(window.HeronApp=R.getInstance()),t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpHelper.ts",["cc","./HeronApp.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.HeronApp}],execute:function(){t._RF.push({},"3966dukDaBPCqxrUaXBn1MX","HttpHelper",void 0);e("default",function(){function e(){}var t=e.prototype;return t.init=function(){console.log("Method not implemented.")},t.handlerRequestPackage=function(e){return console.log("Method not implemented."),n.log.logNet("发送http消息：【"+e.msg+"】",e),e},t.handlerResponsePackage=function(e,t){return n.log.logNet("收到http消息：【"+e+"】",t),0!=t.code||n.message.dispatchEvent(e,t.data),t},t.getPackageCmd=function(e){return console.log("Method not implemented."),""},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpManager.ts",["cc","./HttpRequest.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.HttpRequest}],execute:function(){e._RF.push({},"6de433jIyJKu4ua5G52PBuu","HttpManager",void 0),t("default",function(){function t(){this.http=new n,this._httpHelper=null}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var e=t.prototype;return e.init=function(t,e){this.http.server=t.server,t.timeout&&(this.http.timeout=t.timeout),this._httpHelper=e,e.init(),this.http.httpHelper=e},e.sendMsg=function(t,e){e&&this.http.addHeader("Authorization",e),this._httpHelper.handlerRequestPackage(t),this.http.httpRequest(t)},t}()).instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,s,o;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,s=e.error,o=e.warn}],execute:function(){n._RF.push({},"1592d9Ni4dEi5lFnfc3UAdC","HttpRequest",void 0);var r={},a={},i=e("HttpEvent",function(e){return e.NO_NETWORK="http_request_no_network",e.UNKNOWN_ERROR="http_request_unknown_error",e.TIMEOUT="http_request_timout",e}({})),u=e("HttpReturn",(function(){this.code=200,this.data=null,this.message=void 0}));e("HttpRequest",function(){function e(){this.server="http://127.0.0.1/",this.timeout=1e4,this.header=new Map([["Content-Type","application/json; charset=utf-8"]]),this.httpHelper=null}var n=e.prototype;return n.addHeader=function(e,t){this.header.set(e,t)},n.get=function(e,t,n){void 0===n&&(n=null),this.sendRequest(e,n,!1,t)},n.getAsync=function(e,t){var n=this;return void 0===t&&(t=null),new Promise((function(s,o){n.sendRequest(e,t,!1,(function(e){s(e)}))}))},n.getByArraybuffer=function(e,t,n){void 0===n&&(n=null),this.sendRequest(e,n,!1,t,"arraybuffer",!1)},n.getAsyncByArraybuffer=function(e,t){var n=this;return void 0===t&&(t=null),new Promise((function(s,o){n.sendRequest(e,t,!1,(function(e){s(e)}),"arraybuffer",!1)}))},n.post=function(e,t,n){void 0===n&&(n=null),this.sendRequest(e,n,!0,t)},n.postAsync=function(e,t){var n=this;return void 0===t&&(t=null),new Promise((function(s,o){n.sendRequest(e,t,!0,(function(e){s(e)}))}))},n.httpRequest=function(e){var t=e.msg,n=e.params,o=e.callback,r=e.method;null!=t&&""!=t?"POST"==r?this.post(t,o,n):this.get(t,o,n):s("请求地址不能为空")},n.abort=function(e){var t=r[this.server+e];t&&t.abort()},n.getParamString=function(e){var t="";for(var n in e){var s=e[n];if(s instanceof Object)for(var o in s)t+=o+"="+s[o]+"&";else t+=n+"="+s+"&"}return t.substring(0,t.length-1)},n.sendRequest=function(e,n,c,d,l,f){var p=this;if(void 0===f&&(f=!0),null!=e&&""!=e){var h,v,R="";if(h=0==e.toLocaleLowerCase().indexOf("http")?e:this.server+e,n?(R=this.getParamString(n),v=h.indexOf("?")>-1?h+"&"+R:h+"?"+R):v=h,null==r[v]||a[v]!=R){var g=new XMLHttpRequest;r[v]=g,a[v]=R,c?g.open("POST",h):g.open("GET",v);for(var m,y=t(this.header);!(m=y()).done;){var O=m.value,q=O[0],_=O[1];g.setRequestHeader(q,_)}f&&(g.timeout=this.timeout,g.ontimeout=function(){p.deleteCache(v),N.code=408,N.message=i.TIMEOUT,console.error("请求地址【"+h+"】code:"+N.code+"，请求超时，请检查网络连接或服务器状态",e,N),d?d(N):p.dealReponse(e,N)});var N=new u;g.onloadend=function(){500==g.status&&(p.deleteCache(v),N.code=500,N.message=i.UNKNOWN_ERROR,console.error("请求地址【"+h+"】code:"+N.code+"，未知错误，请检查网络连接或服务器状态",e,N),d?d(N):p.dealReponse(e,N))},g.onerror=function(){p.deleteCache(v),console.log(g.status,g.readyState),0==g.readyState||1==g.readyState||0==g.status?(N.code=500,N.message=i.NO_NETWORK,console.error("请求地址【"+h+"】code:"+N.code+"，断网，请检查网络连接或服务器状态",e,N)):(N.code=500,N.message=i.UNKNOWN_ERROR,console.error("请求地址【"+h+"】code:"+N.code+"，未知错误，请检查网络连接或服务器状态",e,N)),d?d(N):p.dealReponse(e,N)},g.onreadystatechange=function(){if(4==g.readyState&&(p.deleteCache(v),200==g.status)){if("arraybuffer"==l)g.responseType=l,N.code=g.response.code,N.message=g.response.message,N.data=g.response.data;else{var t=JSON.parse(g.response);N.code=t.code,N.message=t.message,N.data=t.data}d?d(N):p.dealReponse(e,N)}},null==n||""==n?g.send():g.send(R)}else o("地址【"+h+"】已正在请求中，不能重复请求")}else s("请求地址不能为空")},n.dealReponse=function(e,t){this.httpHelper.handlerResponsePackage(e,t)},n.deleteCache=function(e){delete r[e],delete a[e]},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtil.ts",["cc","./ResLoader.ts"],(function(n){var e,s,t;return{setters:[function(n){e=n.cclegacy,s=n.JsonAsset},function(n){t=n.ResLoader}],execute:function(){e._RF.push({},"3c659C+BaJGr5xZkYbnD9as","JsonUtil",void 0);var o=window,c="/res/",a=new Map;n("JsonUtil",function(){function n(){}return n.get=function(n){if(a.has(n))return a.get(n)},n.load=function(n,e){if(a.has(n))e(a.get(n));else{var r=c+n;console.log(o.bundle),t.getInstance().load(r,s,(function(s,o){s?(console.warn(s.message),e(null)):(a.set(n,o.json),t.getInstance().release(r),e(o.json))}))}},n.loadAsync=function(n){return new Promise((function(e,c){if(a.has(n))e(a.get(n));else{var r=n;t.getInstance().load(o.bundle,r,s,(function(s,o){s?(console.warn(s.message),e(null)):(a.set(n,o.json),t.getInstance().release(r),e(o.json))}))}}))},n.loadDirAsync=function(){return new Promise((function(n,e){t.getInstance().loadDir(c,(function(e,s){e?(console.warn(e.message),n(!1)):(s.forEach((function(n){a.set(n.name,n.json)})),t.getInstance().releaseDir(c),n(!0))}))}))},n.release=function(n){a.delete(n)},n.clear=function(){a.clear()},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./LanguagePack.ts","./Logger.ts"],(function(e){var a,n,t,g,u,s;return{setters:[function(e){a=e.createClass},function(e){n=e.cclegacy,t=e.sys},function(e){g=e.LanguageData},function(e){u=e.LanguagePack},function(e){s=e.Logger}],execute:function(){n._RF.push({},"3757cxZqLZObIdvP/gQ6Yuj","Language",void 0);e("LanguageManager",function(){function e(){this._languages=[t.Language.CHINESE,t.Language.ENGLISH],this._languagePack=new u,this._defaultLanguage=t.Language.CHINESE}var n=e.prototype;return n.isExist=function(e){return this.languages.indexOf(e)>-1},n.getNextLang=function(){var e=this.languages,a=e.indexOf(g.current);return e[(a+1)%e.length]},n.setLanguage=function(e,a){var n=this;e=null==e||""==e?this._defaultLanguage:e.toLowerCase(),this.languages.indexOf(e)<0&&(console.log("当前不支持【"+e+"】语言，将自动切换到【"+this._defaultLanguage+"】语言"),e=this._defaultLanguage),e!==g.current?this.loadLanguageAssets(e,(function(t){s.getInstance().logConfig("当前语言为【"+e+"】");var u=g.current;g.current=e,n._languagePack.updateLanguage(e),n._languagePack.releaseLanguageAssets(u),a&&a(!0)})):a&&a(!1)},n.getLangByID=function(e){return g.getLangByID(e)},n.loadLanguageAssets=function(e,a){return e=e.toLowerCase(),this._languagePack.loadLanguageAssets(e,a)},n.releaseLanguageAssets=function(e){e=e.toLowerCase(),this._languagePack.releaseLanguageAssets(e)},a(e,[{key:"languages",get:function(){return this._languages},set:function(e){this._languages=e}},{key:"default",set:function(e){this._defaultLanguage=e||t.Language.CHINESE}},{key:"current",get:function(){return g.current}},{key:"pack",get:function(){return this._languagePack}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,n;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"27fb3sjD81JlIP2KFTSWUp4","LanguageData",void 0);var t=e("LanguageDataType",function(e){return e.Json="Json",e.Excel="Excel",e}({})),u=e("LanguageData",function(){function e(){}return e.getLangByID=function(e){for(var n,u=null,r=a(this.language);!(n=r()).done;){var g=n.value,l=g[0],o=g[1];if(l==t.Excel){var c=o[e];c&&(u=c[this.current])}else u=o[e];if(u)return u}return e},e}());u.path_json="language/json",u.path_texture="language/texture",u.path_spine="language/spine",u.current="",u.language=new Map,u.font=null;e("LanguageType",["LanguageLabel","LanguageSprite","LanguageSpine"]);n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){var e,a,n,i,r,o,s,p,u,l,c,g,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,p=t.CCString,u=t.Label,l=t.RichText,c=t.warn,g=t.Component},function(t){h=t.LanguageData}],execute:function(){var d,f,y,m,b,L,_,v,D,I,z,k,w,C;o._RF.push({},"110c8vEd5NEPL/N9meGQnaX","LanguageLabel",void 0);var U=s.ccclass,P=s.property,S=s.menu,F=t("LangLabelParamsItem",U("LangLabelParamsItem")((y=e((f=function(){a(this,"key",y,this),a(this,"value",m,this)}).prototype,"key",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=e(f.prototype,"value",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=f))||d);t("LanguageLabel",(b=U("LanguageLabel"),L=S("Framework/Language/LanguageLabel （文本多语言）"),_=P({type:F,displayName:"params"}),v=P({type:F,displayName:"params"}),D=P({serializable:!0}),I=P({type:p,serializable:!0}),b(z=L((w=e((k=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"_params",w,i(e)),a(e,"_dataID",C,i(e)),e.initFontSize=0,e._needUpdate=!1,e}n(e,t);var o=e.prototype;return o.language=function(){this._needUpdate=!0},o.onLoad=function(){this._needUpdate=!0},o.setVars=function(t,e){for(var a=!1,n=0;n<this._params.length;n++){var i=this._params[n];i.key===t&&(i.value=e,a=!0)}if(!a){var r=new F;r.key=t,r.value=e,this._params.push(r)}this._needUpdate=!0},o.update=function(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)},o.updateContent=function(){var t=this.getComponent(u),e=this.getComponent(l),a=h.font;t?(a&&(t.font=a),t.string=this.string,this.initFontSize=t.fontSize):e?(a&&(e.font=a),e.string=this.string,this.initFontSize=e.fontSize):c("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")},r(e,[{key:"params",get:function(){return this._params||[]},set:function(t){this._params=t,this._needUpdate=!0}},{key:"dataID",get:function(){return this._dataID||""},set:function(t){this._dataID=t,this._needUpdate=!0}},{key:"string",get:function(){var t=h.getLangByID(this._dataID);return t&&this._params.length>0&&this._params.forEach((function(e){t=t.replace("%{"+e.key+"}",e.value)})),t||(c("[LanguageLabel] 未找到语言标识，使用dataID替换"),t=this._dataID),t}}]),e}(g)).prototype,"_params",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(k.prototype,"params",[v],Object.getOwnPropertyDescriptor(k.prototype,"params"),k.prototype),C=e(k.prototype,"_dataID",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(k.prototype,"dataID",[I],Object.getOwnPropertyDescriptor(k.prototype,"dataID"),k.prototype),z=k))||z)||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./Logger.ts","./JsonUtil.ts","./HeronApp.ts"],(function(e){var n,t,r,a,o,s,u,c,i,g,l,f,p;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.director,o=e.error,s=e.TTFFont,u=e.JsonAsset},function(e){c=e.LanguageData,i=e.LanguageDataType,g=e.LanguageType},function(e){l=e.Logger},function(e){f=e.JsonUtil},function(e){p=e.HeronApp}],execute:function(){r._RF.push({},"2ffebyj59xIc4v4BZty8SDm","LanguagePack",void 0);e("LanguagePack",function(){function e(){}var r=e.prototype;return r.updateLanguage=function(e){for(var n=a.getScene().children,t=function(e){g.forEach((function(t){for(var r=n[e].getComponentsInChildren(t),a=0;a<r.length;a++)r[a].language()}))},r=0;r<n.length;++r)t(r)},r.loadLanguageAssets=function(){var e=n(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadJson(n);case 2:return e.next=4,this.loadTexture(n);case 4:return e.next=6,this.loadSpine(n);case 6:r(n);case 7:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),r.loadTable=function(e){return new Promise(n(t().mark((function e(n,r){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.loadAsync("Language");case 2:(a=e.sent)&&(c.language.set(i.Excel,a),l.getInstance().logConfig("config/game/Language","下载语言包 table 资源")),n(null);case 5:case"end":return e.stop()}}),e)}))))},r.loadTexture=function(e){return new Promise((function(n,t){var r=c.path_texture+"/"+e;p.res.loadDir(r,(function(e,t){if(e)return o(e),void n(null);l.getInstance().logConfig(r,"下载语言包 textures 资源"),n(null)}))}))},r.loadJson=function(e){var r=window;return new Promise(n(t().mark((function n(a,o){var g,f;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g=c.path_json+"/"+e,n.next=3,p.res.loadAsync(r.bundle,g,u);case 3:if(!(f=n.sent)){n.next=9;break}c.language.set(i.Json,f.json),l.getInstance().logConfig(g,"下载语言包 json 资源"),n.next=11;break;case 9:return a(null),n.abrupt("return");case 11:p.res.load(g,s,(function(e,n){null==e&&l.getInstance().logConfig(g,"下载语言包 ttf 资源"),c.font=n,a(null)}));case 12:case"end":return n.stop()}}),n)}))))},r.loadSpine=function(e){return new Promise(n(t().mark((function n(r,a){var s;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=c.path_spine+"/"+e,p.res.loadDir(s,(function(e,n){if(e)return o(e),void r(null);l.getInstance().logConfig(s,"下载语言包 spine 资源"),r(null)}));case 2:case"end":return n.stop()}}),n)}))))},r.releaseLanguageAssets=function(e){var n=c.path_texture+"/"+e;p.res.releaseDir(n);var t=c.path_json+"/"+e,r=p.res.get(t,u);r&&r.decRef();var a=p.res.get(t,s);a&&a.decRef();var o=c.path_spine+"/"+e;p.res.release(o)},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./ResLoader.ts"],(function(e){var t,a,n,i,o,r,u,s,p,c,l,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,u=e._decorator,s=e.CCString,p=e.sp,c=e.Component},function(e){l=e.LanguageData},function(e){g=e.ResLoader}],execute:function(){var d,f,h,y,D,S,L;r._RF.push({},"53e25hqV6VEJqayXfz6Qam2","LanguageSpine",void 0);var m=u.ccclass,_=u.property,v=u.menu;e("LanguageSpine",(d=m("LanguageSpine"),f=v("Framework/Language/LanguageSpine （Spine 动画多语言）"),h=_({serializable:!0}),y=_({type:s,serializable:!0}),d(D=f((L=t((S=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_dataID",L,i(t)),t._defaultAnimation="",t}a(t,e);var r=t.prototype;return r.onLoad=function(){var e=this.getComponent(p.Skeleton);this._defaultAnimation=e.animation},r.start=function(){this.updateSpine()},r.language=function(){this.updateSpine()},r.updateSpine=function(){var e="language/spine/"+l.current+"/"+this.dataID,t=g.getInstance().get(e,p.SkeletonData);if(t){var a=this.getComponent(p.Skeleton);a.skeletonData=t,a.setAnimation(0,this._defaultAnimation,!0)}else console.error("[LanguageSpine] 资源不存在 "+e)},o(t,[{key:"dataID",get:function(){return this._dataID||""},set:function(e){this._dataID=e,this.updateSpine()}}]),t}(c)).prototype,"_dataID",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(S.prototype,"dataID",[y],Object.getOwnPropertyDescriptor(S.prototype,"dataID"),S.prototype),D=S))||D)||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./ResLoader.ts"],(function(e){var t,a,r,i,n,o,p,u,s,c,l,g,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,p=e._decorator,u=e.CCString,s=e.SpriteFrame,c=e.Sprite,l=e.UITransform,g=e.Component},function(e){f=e.LanguageData},function(e){d=e.ResLoader}],execute:function(){var S,y,h,D,L,m,I,b,z;o._RF.push({},"11b96k/RIZF57Loehxyl6Hs","LanguageSprite",void 0);var v=p.ccclass,_=p.property,w=p.menu;e("LanguageSprite",(S=v("LanguageSprite"),y=w("Framework/Language/LanguageSprite （图片多语言）"),h=_({serializable:!0}),D=_({type:u,serializable:!0}),L=_({tooltip:"是否设置为图片原始资源大小"}),S(m=y((b=t((I=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"_dataID",b,i(t)),r(t,"isRawSize",z,i(t)),t}a(t,e);var o=t.prototype;return o.start=function(){this.updateSprite()},o.language=function(){this.updateSprite()},o.updateSprite=function(){var e="language/texture/"+f.current+"/"+this.dataID+"/spriteFrame",t=d.getInstance().get(e,s);if(t){var a=this.getComponent(c);if(a.spriteFrame=t,this.isRawSize){var r,i=t._originalSize;null==(r=a.getComponent(l))||r.setContentSize(i)}}else console.error("[LanguageSprite] 资源不存在 "+e)},n(t,[{key:"dataID",get:function(){return this._dataID||""},set:function(e){this._dataID=e,this.updateSprite()}}]),t}(g)).prototype,"_dataID",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(I.prototype,"dataID",[D],Object.getOwnPropertyDescriptor(I.prototype,"dataID"),I.prototype),z=t(I.prototype,"isRawSize",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=I))||m)||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerPopup.ts","./UIDefine.ts"],(function(i){var s,t,a,n;return{setters:[function(i){s=i.inheritsLoose},function(i){t=i.cclegacy},function(i){a=i.LayerPopUp},function(i){n=i.ViewParams}],execute:function(){t._RF.push({},"313a9yz1RZGdrEJ7CQqPofc","LayerDialog",void 0);i("LayerDialog",function(i){function t(){for(var s,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(s=i.call.apply(i,[this].concat(a))||this).params=[],s}s(t,i);var a=t.prototype;return a.add=function(i,s,t,a){this.ui_nodes.size>0?this.params.push({uiid:i,config:s,params:t,callbacks:a}):this.show(i,s,t,a)},a.show=function(i,s,t,a){var e=this.ui_cache.get(s.prefab);null==e&&((e=new n).uiid=i,e.valid=!0,e.config=s),e.params=t||{},e.callbacks=null!=a?a:{},this.ui_nodes.set(e.config.prefab,e),this.load(e,s.bundle)},a.onCloseWindow=function(s){i.prototype.onCloseWindow.call(this,s),setTimeout(this.next.bind(this),0)},a.setBlackDisable=function(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())},a.next=function(){if(this.params.length>0){var i=this.params.shift();this.show(i.uiid,i.config,i.params,i.callbacks)}},t}(a));t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerEnum.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"f7799d9I8VDmLTb71dYrAwN","LayerEnum",void 0);e("ScreenAdapterType",function(e){return e[e.Auto=0]="Auto",e[e.Landscape=1]="Landscape",e[e.Portrait=2]="Portrait",e}({})),e("LayerType",function(e){return e.Game="LayerGame",e.UI="LayerUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e}({})),e("LayerTypeCls",function(e){return e.UI="UI",e.PopUp="PopUp",e.Dialog="Dialog",e.Notify="Notify",e.Node="Node",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewUtil.ts","./UIDefine.ts","./Notify.ts"],(function(t){var e,n,i,a,o,r,s,l,c,f,u,h;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,o=t.Widget,r=t.Layers,s=t.BlockInputEvents,l=t.Node,c=t.instantiate},function(t){f=t.ViewUtil},function(t){u=t.PromptResType},function(t){h=t.Notify}],execute:function(){a._RF.push({},"b995ea9BZFKbK1i6qF2PaLF","LayerNotify",void 0);t("LayerNotify",function(t){function a(e){var n;(n=t.call(this,e)||this).black=void 0,n.wait=null,n.notify=null,n.notifyItem=null;var i=n.addComponent(o);return i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,n.layer=r.Enum.UI_2D,n.black=n.addComponent(s),n.black.enabled=!1,n}e(a,t);var l=a.prototype;return l.waitOpen=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.wait){t.next=8;break}t.next=7;break;case 4:this.wait=t.sent,t.next=8;break;case 7:this.wait=f.createPrefabNode(u.Wait);case 8:null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.waitClose=function(){this.wait&&this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)},l.toast=function(){var t=n(i().mark((function t(e,n){var a,o,r,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.notify){t.next=10;break}t.next=7;break;case 4:this.notify=t.sent,t.next=8;break;case 7:this.notify=f.createPrefabNode(u.Toast);case 8:this.notifyItem=this.notify.children[0],this.notifyItem.parent=null;case 10:this.notify.parent=this,a=c(this.notifyItem),o=a.getChildByName("prompt"),r=o.getComponent(h),a.parent=this.notify,r.onComplete=function(){0==s.notify.children.length&&(s.notify.parent=null)},r.toast(e,n),this.notify.children.length>3&&this.notify.children[0].destroy();case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),a}(l));a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewUtil.ts","./UIDefine.ts","./LayerUI.ts"],(function(e){var n,t,i,s,o,a,c,r,h,l,u,d;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,i=e.assertThisInitialized,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e.Node,r=e.BlockInputEvents,h=e.Layers},function(e){l=e.ViewUtil},function(e){u=e.PromptResType},function(e){d=e.LayerUI}],execute:function(){a._RF.push({},"76f4fVEHydINpFvowdLGdem","LayerPopup",void 0);e("LayerPopUp",function(e){function a(n){var t;return(t=e.call(this,n)||this).black=void 0,t.mask=void 0,t.layer=h.Enum.UI_2D,t.on(c.EventType.CHILD_ADDED,t.onChildAdded,i(t)),t.on(c.EventType.CHILD_REMOVED,t.onChildRemoved,i(t)),t}n(a,e);var d=a.prototype;return d.onChildAdded=function(e){this.mask&&this.mask.setSiblingIndex(this.children.length-2)},d.onChildRemoved=function(e){this.mask&&this.mask.setSiblingIndex(this.children.length-2)},d.showUi=function(){var n=s(o().mark((function n(t){var i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.prototype.showUi.call(this,t);case 2:return(i=n.sent)&&(this.openVacancyRemove(t.config),this.black.enabled=!0),n.abrupt("return",i);case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),d.onCloseWindow=function(n){e.prototype.onCloseWindow.call(this,n),this.setBlackDisable()},d.setBlackDisable=function(){0==this.ui_nodes.size&&(this.black&&(this.black.enabled=!1),this.closeVacancyRemove(),this.closeMask())},d.closeMask=function(){if(null!=this.mask){for(var e,n=!0,i=t(this.ui_nodes.values());!(e=i()).done;){if(e.value.config.mask){n=!1;break}}n&&(this.mask.parent=null)}},d.openVacancyRemove=function(e){null==this.mask&&(this.mask=l.createPrefabNode(u.Mask),this.mask.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.black=this.mask.addComponent(r),this.black.enabled=!1),e.mask&&(this.mask.parent=this)},d.onTouchEnd=function(e){if(this.ui_nodes.size>0){var n=this.ui_nodes.array[this.ui_nodes.size-1];n.valid&&n.config.vacancy&&this.remove(n.config.prefab,n.config.destroy)}},d.closeVacancyRemove=function(){for(var e,n=!0,i=t(this.ui_nodes.values());!(e=i()).done;){if(e.value.config.vacancy){n=!1;break}}n&&this.hasEventListener(c.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(c.EventType.TOUCH_END,this.onTouchEnd,this)},d.clear=function(n){e.prototype.clear.call(this,n),this.black&&(this.black.enabled=!1),this.closeVacancyRemove(),this.closeMask()},a}(d));a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DelegateComponent.ts","./HeronApp.ts","./ResLoader.ts","./UIDefine.ts","./Collection.ts"],(function(e){var n,t,o,i,a,r,s,c,u,l,d,f,h,p;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,a=e.Widget,r=e.Node,s=e.instantiate,c=e.SafeArea,u=e.Prefab},function(e){l=e.DelegateComponent},function(e){d=e.HeronApp},function(e){f=e.ResLoader},function(e){h=e.ViewParams},function(e){p=e.Collection}],execute:function(){i._RF.push({},"ebe1eWata5IbIv9gHtLiXDR","LayerUI",void 0);e("LayerUI",function(e){function i(n){var t;(t=e.call(this,n)||this).onOpenFailure=null,t.ui_nodes=new p,t.ui_cache=new Map;var o=t.addComponent(a);return o.isAlignLeft=o.isAlignRight=o.isAlignTop=o.isAlignBottom=!0,o.left=o.right=o.top=o.bottom=0,o.alignMode=2,o.enabled=!0,t}n(i,e);var r=i.prototype;return r.add=function(e,n,t,o){if(this.ui_nodes.has(n.prefab))console.warn("路径为【"+n.prefab+"】的预制重复加载");else{var i=this.ui_cache.get(n.prefab);null==i&&((i=new h).uiid=e,i.config=n),this.ui_nodes.set(n.prefab,i),i.params=null!=t?t:{},i.callbacks=null!=o?o:{},i.valid=!0,this.load(i,n.bundle)}},r.load=function(){var e=t(o().mark((function e(n,t){var i,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=setTimeout(this.onLoadingTimeoutGui,1e4),!n||!n.node){e.next=6;break}return e.next=4,this.showUi(n);case 4:e.next=22;break;case 6:return t=t||f.getInstance().defaultBundleName,e.next=9,f.getInstance().loadAsync(t,n.config.prefab,u);case 9:if(!(a=e.sent)){e.next=20;break}return n.node=s(a),n.config.safeArea&&n.node.addComponent(c),(r=n.node.addComponent(l)).vp=n,r.onCloseWindow=this.onCloseWindow.bind(this),e.next=18,this.showUi(n);case 18:e.next=22;break;case 20:console.warn("路径为["+t+"]【"+n.config.prefab+"】的预制加载失败"),this.failure(n);case 22:d.ui.waitClose(),clearTimeout(i);case 24:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),r.onLoadingTimeoutGui=function(){d.ui.waitOpen()},r.onCloseWindow=function(e){this.ui_nodes.delete(e.config.prefab)},r.showUi=function(){var e=t(o().mark((function e(n){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.node.getComponent(l),e.next=3,t.add();case 3:return(i=e.sent)?(n.node.parent=this,n.valid=!0):(console.warn("路径为【"+n.config.prefab+"】的自定义预处理逻辑异常.检查预制上绑定的组件中 onAdded 方法,返回true才能正确完成窗口显示流程"),this.failure(n)),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),r.failure=function(e){this.onCloseWindow(e),e.callbacks&&e.callbacks.onLoadFailure&&e.callbacks.onLoadFailure(),this.onOpenFailure&&this.onOpenFailure()},r.remove=function(e,n){var t=void 0;void 0!==n&&(t=n);var o=this.ui_nodes.get(e);o&&(void 0===t&&(t=void 0===o.config.destroy||o.config.destroy),!1===t&&this.ui_cache.set(o.config.prefab,o),o.node.getComponent(l).remove(t));!0===t&&this.removeCache(e)},r.removeCache=function(e){var n=this.ui_cache.get(e);if(n){this.onCloseWindow(n),this.ui_cache.delete(e);var t=n.node,o=t.getComponent(l);o&&o.remove(!0),t.destroy()}},r.get=function(e){var n=this.ui_nodes.get(e);return n?n.node:null},r.has=function(e){return this.ui_nodes.has(e)},r.clear=function(e){var n=this;this.ui_nodes.forEach((function(t,o){n.remove(t.config.prefab,e),t.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach((function(e,t){n.removeCache(t)}))},i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f4d36IVkDZEFYGJyOy6wiZw","List",void 0);e("List",function(){function e(e){void 0===e&&(e=!0),this.element=void 0,this.only=!1,this.count=0,this.only=e,this.element=[]}var n=e.prototype;return n.push=function(e){if(this.only&&this.element.indexOf(e)>=0)return!1;return this.element.push(e),this.count=this.element.length,!0},n.unshift=function(e){if(this.only&&this.element.indexOf(e)>=0)return!1;return this.element.unshift(e),this.count=this.element.length,!0},n.pop=function(){if(this.element.length>0){var e=this.element.pop();return this.count=this.element.length,e}return null},n.shift=function(){if(this.element.length>0){var e=this.element.shift();return this.count=this.element.length,e}return null},n.removeAt=function(e){if(e>=this.element.length)throw new Error("删除索引超出范围！");var t=this.element[e];return this.element.splice(e,1),this.count=this.element.length,t},n.remove=function(e){var t=this.element.indexOf(e);if(t<0)throw new Error("要删除的内容不在列表中！"+e);this.element[t];this.element.splice(t,1),this.count=this.element.length},n.clear=function(){this.count=0,this.element.length=0},n.has=function(e){return this.find(e)>=0},n.find=function(e){return this.element.indexOf(e)},n.findIndex=function(e){return this.element.findIndex(e)},n.get=function(e){if(e>=this.element.length)throw new Error("超出索引范围:"+e+"/"+this.element.length);return this.element[e]},t(e,[{key:"elements",get:function(){return this.element}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,n,r,e,a,l,c;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,l=t.Node,c=t.Component}],execute:function(){var s,d,u,p,g;e._RF.push({},"95143M/82NCOLKGzw14JlmS","LoadingIndicator",void 0);var h=a.ccclass,f=a.property;t("LoadingIndicator",(s=h("LoadingIndicator"),d=f(l),s((g=o((p=function(t){function o(){for(var o,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return o=t.call.apply(t,[this].concat(e))||this,n(o,"loading",g,r(o)),o.loading_rotate=0,o}return i(o,t),o.prototype.update=function(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)},o}(c)).prototype,"loading",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.log}],execute:function(){n._RF.push({},"479cdJANP5KaJgU+8z0DdSE","Logger",void 0);var i=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({}));t("Logger",function(){function t(){var t,n;this.typeNames=((t={})[i.Net]="网络日志",t[i.Model]="数据日志",t[i.Business]="业务日志",t[i.View]="视图日志",t[i.Config]="配置日志",t[i.Trace]="标准日志",t),this.typeColors=((n={})[i.Net]="#ee7700",n[i.Model]="#800080",n[i.Business]="#3a5fcd",n[i.View]="#008000",n[i.Config]="#808080",n[i.Trace]="#000000",n),this.errorColor="#ff0000",this.tags=0,this.lc=null,this.init()}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.init=function(){this.tags=i.Net|i.Model|i.Business|i.View|i.Config|i.Trace},n.setLoggerConsole=function(t){this.lc=t},n.setTags=function(t){void 0===t&&(t=0),this.tags=t},n.start=function(t){void 0===t&&(t="Time"),console.time(t)},n.end=function(t){void 0===t&&(t="Time"),console.timeEnd(t)},n.table=function(t,n){this.isOpen(i.Trace)&&(n&&console.log(n),console.table(t))},n.info=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.Trace,this.typeColors[i.Trace]].concat(n))},n.logNet=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.Net,this.typeColors[i.Net]].concat(n))},n.logModel=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.Model,this.typeColors[i.Model]].concat(n))},n.logBusiness=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.Business,this.typeColors[i.Business]].concat(n))},n.logView=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.View,this.typeColors[i.View]].concat(n))},n.logConfig=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.Config,this.typeColors[i.Config]].concat(n))},n.error=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.print.apply(this,[i.Business,this.errorColor].concat(n))},n.isOpen=function(t){return 0!=(this.tags&t)},n.print=function(t,n){if(this.isOpen(t)){for(var i=this.typeNames[t],s=this.getDateString(),o=this.stack(),r=arguments.length,a=new Array(r>2?r-2:0),c=2;c<r;c++)a[c-2]=arguments[c];if(this.lc){var l=s+"["+i+"]"+o+": "+a.map((function(t){return JSON.stringify(t)})).join(" ");this.lc.trace(l,n)}else{var g=console.log||e,h="%c"+s+"【"+i+"】"+o+": %o";g.call.apply(g,[null,h,"color: "+n+";"].concat(a))}}},n.stack=function(){var t=(new Error).stack.split("\n"),n=[];t.forEach((function(t){var e,i=(t=t.substring(7)).split(" ");i.length<2?n.push(i[0]):n.push(((e={})[i[0]]=i[1],e))}));var e,i=[],s=[];if(5<n.length-1)for(var o in n[5])if(2==(s=o.split(".")).length)i=s.concat();else{var r=(e=n[5][o]).lastIndexOf("/"),a=e.lastIndexOf(".");if(r>-1&&a>-1){var c=e.substring(r+1,a);i.push(c)}else i.push(e)}return 1==i.length?"["+i[0]+".ts]":2==i.length?"["+i[0]+".ts->"+i[1]+"]":""},n.getDateString=function(){var t=new Date;return"["+t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")+"]"},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Main.ts","./AgoraSDK.ts","./AgoraSDK2.ts","./VoiceChatManager.ts","./MicrophonePermissHandler.ts","./BaseCtrl.ts","./BaseLoading.ts","./BaseModel.ts","./BaseNetCtrl.ts","./Toggle.ts","./GameConfig.ts","./MsgCode.ts","./NetDefine.ts","./UIConfig2.ts","./HttpHelper.ts","./WebsocketHelper.ts","./WebsocketTips.ts","./PromptManager.ts","./test.ts","./CommonUI.ts","./TopMeun.ts","./HeronApp.ts","./BaseEntry.ts","./Language.ts","./LanguageData.ts","./LanguageLabel.ts","./LanguagePack.ts","./LanguageSpine.ts","./LanguageSprite.ts","./CommonPrompt.ts","./LoadingIndicator.ts","./Notify.ts","./Timer.ts","./TimerManager.ts","./RootComponent.ts","./AudioEffect.ts","./AudioEffectPool.ts","./AudioManager.ts","./AudioMusic.ts","./BundleManager.ts","./Manager.ts","./DataManager.ts","./ResLoader.ts","./Logger.ts","./EventMessage.ts","./MessageManager.ts","./HttpManager.ts","./NetInterface.ts","./WebSocketManager.ts","./HttpRequest.ts","./MetMsgManager.ts","./WebSock.ts","./NodePoolManager.ts","./QueryManager.ts","./RandomManager.ts","./SeedRandom.ts","./StorageManager.ts","./StorageSecurityCrypto.ts","./StorageSecuritySimple.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerEnum.ts","./LayerNotify.ts","./LayerPopup.ts","./LayerUI.ts","./UIConfig.ts","./UIDefine.ts","./UIManager.ts","./JsonUtil.ts","./StringUtil.ts","./ViewUtil.ts","./AsyncQueue.ts","./Collection.ts","./List.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./UIConfig2.ts","./GameConfig.ts","./BaseNetCtrl.ts","./MsgCode.ts"],(function(e){var t,n,o,a,r,i,s,u,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,a=e.Component},function(e){r=e.HeronApp},function(e){i=e.CommonUIData},function(e){s=e.gameList},function(e){u=e.BaseNetCtrl},function(e){c=e.MsgInfo}],execute:function(){var d;n._RF.push({},"ebd23pJd79DaqMMkbGgdCXo","Main",void 0);var f=o.ccclass;o.property,e("Main",f("Main")(d=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.onLoad=function(){r.getInstance().init(),r.getInstance().persist.addComponent(u),r.ui.initConfig(i),r.netMsg.registerMsgCode(c),this.enterGame()},o.enterGame=function(){r.log.info(r.query.data);var e=r.query.data.gameID||10001,t=r.query.data.userID||123456,n=r.query.data.roomID||123456;r.data.setData("gameID",Number(e)),r.data.setData("userID",Number(t)),r.data.setData("roomID",Number(n));var o=s.get(Number(e));o?r.bundle.loadScene(o,(function(){r.bundle.enterScene(o)})):console.error("未找到游戏ID "+e+" 对应的游戏名称")},o.update=function(e){},n}(a))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Manager.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"c1c4e+4kolAzpSHb0pt9Way","Manager",void 0),n("default",function(){function n(){}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}()).instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["cc"],(function(e){var n,t,a;return{setters:[function(e){n=e.cclegacy,t=e.warn,a=e.log}],execute:function(){n._RF.push({},"7000ac78L9BqrzquX6COrG5","MessageManager",void 0);var i=window,r=function(){this.event=void 0,this.listener=void 0,this.object=void 0};e("default",function(){function e(){this.events=new Map}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var n=e.prototype;return n.on=function(e,n,a){if(a||(a=n,n=n.onHandleEvent),e&&n){var i=this.events.get(e);null==i&&(i=[],this.events.set(e,i));for(var s=i.length,o=0;o<s;o++){var c=i[o];c.listener==n&&c.object==a&&t("名为【"+e+"】的事件重复注册侦听器")}var v=new r;v.event=e,v.listener=n,v.object=a,i.push(v)}else t("注册【"+e+"】事件的侦听器函数为空")},n.once=function(e,n,t){var a=this;t||(t=n,n=n.onHandleEvent);var i=function(r){if(a.off(e,i,t),i=null,"function"==typeof n){for(var s,o=arguments.length,c=new Array(o>1?o-1:0),v=1;v<o;v++)c[v-1]=arguments[v];(s=n).call.apply(s,[t,r].concat(c))}};this.on(e,i,t)},n.off=function(e,n,t){t||(t=n,n=n.onHandleEvent);var i=this.events.get(e);if(i){for(var r=i.length,s=0;s<r;s++){var o=i[s];if(o.listener==n&&o.object==t){i.splice(s,1);break}}0==i.length&&this.events.delete(e)}else a("名为【"+e+"】的事件不存在")},n.dispatchEvent=function(e){var n=this.events.get(e);if(null!=n){for(var t=n.concat(),a=t.length,i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];for(var o=0;o<a;o++){var c,v=t[o];(c=v.listener).call.apply(c,[v.object,e].concat(r))}}},n.dispatchJSEvent=function(e,n){if(i.parent)i.parent.postMessage({msg:e,data:n},"*")},e}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/MetMsgManager.ts",["cc","./HeronApp.ts"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy},function(e){s=e.HeronApp}],execute:function(){t._RF.push({},"20c6cAt9CZOFIv2VxhWIHWs","MetMsgManager",void 0);var n=window;e("default",function(){function e(){this.msgCodeList={}}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var t=e.prototype;return t.registerMsgCode=function(e,t){void 0===t&&(t=s.res.defaultBundleName),this.msgCodeList[t]=e},t.removeMsgCode=function(e){void 0===e&&(e=s.res.defaultBundleName),delete this.msgCodeList[e]},t.getMsgToCode=function(e,t){var i=0;if(this.msgCodeList[n.bundle]&&(i=this.msgCodeList[n.bundle].MsgToCode[e]),i)return i;if(i=this.msgCodeList[s.res.defaultBundleName].MsgToCode[e])return i;for(var o in this.msgCodeList){var r=this.msgCodeList[o].MsgToCode[e];if(r&&(i=r,o!=s.res.defaultBundleName))return i}return i},t.getCodeToMsg=function(e){var t="",n="";for(var i in this.msgCodeList){var o=this.msgCodeList[i].CodeToMsg[e];if(o&&(t=o,n=i,i!=s.res.defaultBundleName))return{msg_id:t,bundle:n}}return{msg_id:t,bundle:n}},t.getRqCodeToRsCode=function(e){for(var t in this.msgCodeList){var s=this.msgCodeList[t].MapTable[e];if(s)return s}},e}()).instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/MicrophonePermissHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"87536tVXzRNnY9CH0thTPmy","MicrophonePermissHandler",void 0);var i=e("default",function(){function e(){}return e.checkPermissionStatus=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,navigator.permissions){e.next=4;break}return console.warn("Browser does not support Permissions API"),e.abrupt("return","prompt");case 4:return e.next=6,navigator.permissions.query({name:"microphone"});case 6:return r=e.sent,e.abrupt("return",r.state);case 10:return e.prev=10,e.t0=e.catch(0),console.warn("Failed to check microphone permission:",e.t0),e.abrupt("return","prompt");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),e.requestPermission=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=!0),e.prev=1,this.isSupported()){e.next=4;break}throw new Error("Microphone not supported in this browser");case 4:if(this.isSecureContext()){e.next=6;break}throw new Error("Microphone access requires HTTPS or localhost");case 6:return e.next=8,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 8:return n=e.sent,r&&n.getAudioTracks().forEach((function(e){e.enabled=!1,console.log("Microphone track muted by default")})),n.getTracks().forEach((function(e){return e.stop()})),console.log("Microphone permission granted"),e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(1),this.handlePermissionError(e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(r){return e.apply(this,arguments)}}(),e.ensurePermission=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=!0),this.isSupported()){e.next=4;break}return console.error("Microphone not supported"),e.abrupt("return",!1);case 4:if(this.isSecureContext()){e.next=7;break}return console.error("Secure context (HTTPS) required for microphone access"),e.abrupt("return",!1);case 7:return e.next=9,this.checkPermissionStatus();case 9:n=e.sent,console.log("Current microphone permission status:",n),e.t0=n,e.next="granted"===e.t0?14:"denied"===e.t0?16:"prompt"===e.t0?18:21;break;case 14:return r&&console.log("Microphone permission already granted, will default to muted"),e.abrupt("return",!0);case 16:return console.warn("Microphone permission was denied. User needs to manually enable it."),e.abrupt("return",!1);case 18:return e.next=20,this.requestPermission(r);case 20:return e.abrupt("return",e.sent);case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),e.isSupported=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia||"function"!=typeof navigator.mediaDevices.getUserMedia)},e.isSecureContext=function(){return window.isSecureContext||"https:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname},e.getAudioInputDevices=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isSupported()){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return r=e.sent,e.abrupt("return",r.filter((function(e){return"audioinput"===e.kind})));case 9:return e.prev=9,e.t0=e.catch(0),console.error("Failed to enumerate audio devices:",e.t0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),e.hasAudioInputDevice=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAudioInputDevices();case 2:return r=e.sent,e.abrupt("return",r.length>0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getPermissionInstructions=function(){return'请按以下步骤开启麦克风权限：\n\n              Chrome/Edge:\n              1. 点击地址栏左侧的锁形图标或麦克风图标\n              2. 将"麦克风"设置为"允许"\n              3. 刷新页面重试\n\n              Firefox:\n              1. 点击地址栏左侧的盾牌图标\n              2. 选择"允许"麦克风权限\n              3. 刷新页面重试\n\n              Safari:\n              1. Safari菜单 > 偏好设置 > 网站 > 麦克风\n              2. 将此网站设置为"允许"\n              3. 刷新页面重试'},e.handlePermissionError=function(e){if(e instanceof Error)switch(e.name){case"NotAllowedError":console.warn("User denied microphone permission");break;case"NotFoundError":console.error("No microphone device found");break;case"NotReadableError":console.error("Microphone is already in use by another application");break;case"AbortError":console.warn("Microphone permission request was aborted");break;case"NotSupportedError":console.error("Microphone not supported or HTTPS required");break;case"SecurityError":console.error("Security error: HTTPS required for microphone access");break;default:console.error("Microphone permission error:",e.message)}else console.error("Unknown microphone permission error:",e)},e.createTestStream=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),e.prev=1,e.next=4,this.ensurePermission(r);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 9:return n=e.sent,r&&n.getAudioTracks().forEach((function(e){e.enabled=!1,console.log("Audio track created and muted by default")})),e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(1),console.error("Failed to create microphone test stream:",e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(r){return e.apply(this,arguments)}}(),e.createMutedAudioStream=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createTestStream(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createUnmutedAudioStream=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createTestStream(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.toggleStreamMute=function(e,r){e?e.getAudioTracks().forEach((function(e){e.enabled=!r,console.log("Audio track "+(r?"muted":"unmuted"))})):console.warn("No stream provided for mute toggle")},e.isStreamMuted=function(e){if(!e)return!0;var r=e.getAudioTracks();return 0===r.length||r.every((function(e){return!e.enabled}))},e.watchPermissionChange=function(){var e=r(t().mark((function e(r){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,navigator.permissions){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,navigator.permissions.query({name:"microphone"});case 5:return(n=e.sent).addEventListener("change",(function(){r(n.state)})),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.warn("Failed to watch permission changes:",e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}(),e.initializeMicrophone=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),e.prev=1,e.next=4,this.ensurePermission(r);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return this.currentStream&&this.cleanup(),e.next=10,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 10:return this.currentStream=e.sent,r&&this.currentStream.getAudioTracks().forEach((function(e){e.enabled=!1})),this._isInitialized=!0,console.log("✅ Microphone initialized "+(r?"(muted)":"(unmuted)")),this.notifyStatusChange(!r),e.abrupt("return",!0);case 18:return e.prev=18,e.t0=e.catch(1),console.error("❌ Failed to initialize microphone:",e.t0),this.handlePermissionError(e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(r){return e.apply(this,arguments)}}(),e.enableMicrophone=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._isInitialized&&this.currentStream){e.next=6;break}return e.next=4,this.initializeMicrophone(!1);case 4:return r=e.sent,e.abrupt("return",r);case 6:return this.currentStream.getAudioTracks().forEach((function(e){e.enabled=!0})),console.log("🎤 Microphone enabled"),this.notifyStatusChange(!0),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(0),console.error("❌ Failed to enable microphone:",e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),e.disableMicrophone=function(){var e=r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._isInitialized&&this.currentStream){e.next=6;break}return e.next=4,this.initializeMicrophone(!0);case 4:return r=e.sent,e.abrupt("return",r);case 6:return this.currentStream.getAudioTracks().forEach((function(e){e.enabled=!1})),console.log("🔇 Microphone disabled (muted)"),this.notifyStatusChange(!1),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(0),console.error("❌ Failed to disable microphone:",e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),e.toggleMicrophone=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getMicrophoneState()){e.next=7;break}return e.next=4,this.disableMicrophone();case 4:return e.abrupt("return",!1);case 7:return e.next=9,this.enableMicrophone();case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getMicrophoneState=function(){if(!this._isInitialized||!this.currentStream)return!1;var e=this.currentStream.getAudioTracks();return 0!==e.length&&e.some((function(e){return e.enabled}))},e.getCurrentStream=function(){return this.currentStream},e.isInitialized=function(){return this._isInitialized&&null!==this.currentStream},e.addStatusChangeListener=function(e){this.statusChangeCallbacks.push(e)},e.removeStatusChangeListener=function(e){var r=this.statusChangeCallbacks.indexOf(e);r>-1&&this.statusChangeCallbacks.splice(r,1)},e.cleanup=function(){this.currentStream&&(this.currentStream.getTracks().forEach((function(e){e.stop()})),this.currentStream=null),this._isInitialized=!1,console.log("🧹 Microphone resources cleaned up")},e.notifyStatusChange=function(e){this.statusChangeCallbacks.forEach((function(r){try{r(e)}catch(e){console.error("Error in status change callback:",e)}}))},e.getMicrophoneStatus=function(){var e=r(t().mark((function e(){var r,n,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkPermissionStatus();case 2:return r=e.sent,n=this.getMicrophoneState(),e.next=6,this.hasAudioInputDevice();case 6:return i=e.sent,e.next=9,this.getAudioInputDevices();case 9:return a=e.sent,e.abrupt("return",{isInitialized:this._isInitialized,isEnabled:n,permissionState:r,hasPermission:"granted"===r,hasDevices:i,deviceCount:a.length,isSupported:this.isSupported(),isSecureContext:this.isSecureContext(),devices:a});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}());i.currentStream=null,i._isInitialized=!1,i.statusChangeCallbacks=[],n._RF.pop()}}}));

System.register("chunks:///_virtual/MsgCode.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"168caJalhlOoLx5cPtXC9Gu","MsgCode",void 0);e("PROTOCOL_MAPPINGS",[{request:4,response:5,name:"Heartbeat"},{request:7,response:8,name:"CreateRoom"},{request:9,response:10,name:"JoinRoom"},{request:11,response:12,name:"LeaveRoom"},{request:13,response:14,name:"GetRooms"}]),e("MsgInfo",{CodeToMsg:{66:"ConnectRs",4:"HeartbeatRq",5:"HeartbeatRs",7:"CreateRoomRq",8:"CreateRoomRs",9:"JoinRoomRq",10:"JoinRoomRs",11:"LeaveRoomRq",12:"LeaveRoomRs",13:"GetRoomsRq",14:"GetRoomsRs",19:"PlayerJoinedMC"},MsgToCode:{ConnectRs:"66",HeartbeatRq:"4",HeartbeatRs:"5",CreateRoomRq:"7",CreateRoomRs:"8",JoinRoomRq:"9",JoinRoomRs:"10",LeaveRoomRq:"11",LeaveRoomRs:"12",GetRoomsRq:"13",GetRoomsRs:"14",PlayerJoinedMC:"19"},MapTable:{66:"66",5:"4",8:"7",10:"9",12:"11",14:"13",19:"19"}});o._RF.pop()}}}));

System.register("chunks:///_virtual/NetDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMessage.ts"],(function(E){var _,S,R;return{setters:[function(E){_=E.inheritsLoose},function(E){S=E.cclegacy},function(E){R=E.EventMessage}],execute:function(){S._RF.push({},"9bc78pDbVBLuY4Q21hY96il","NetDefine",void 0);var C=E("default",function(E){function S(){return E.apply(this,arguments)||this}return _(S,E),S}(R));C.UNKNOWN=0,C.CONNECT=1,C.DISCONNECT=2,C.HEARTBEAT=4,C.CS_CREATE_ROOM=15,C.CS_JOIN_ROOM=16,C.CS_LEAVE_ROOM=17,C.CS_GET_ROOMS=18,C.CS_GAME_START=29,C.CS_GAME_ACTION=30,C.CS_GAME_STATE=31,C.CS_GAME_END=32,C.CS_GAME_EVENT=33,C.CS_SYSTEM_MESSAGE=44,C.CS_ERROR_MESSAGE=45,C.SC_CONNECT_RESPONSE=66,C.SC_HEARTBEAT_RESPONSE=67,C.SC_CREATE_ROOM_RESPONSE=68,C.SC_JOIN_ROOM_RESPONSE=69,C.SC_LEAVE_ROOM_RESPONSE=70,C.SC_GET_ROOMS_RESPONSE=71,C.SC_GAME_START_RESPONSE=72,C.SC_GAME_ACTION_RESPONSE=73,C.SC_GAME_STATE_RESPONSE=74,C.SC_GAME_END_RESPONSE=75,C.SC_GAME_EVENT_RESPONSE=76,C.SC_SYSTEM_MESSAGE=77,C.SC_ERROR_MESSAGE=78,C.CS_CUSTOM_MESSAGE=100,C.SC_CUSTOM_MESSAGE=101,C.CONNECT_SUCCESS="ConnectRs",C.HEART_BEAT_RQ="HeartbeatRq",C.CREATE_ROOM_RQ="CreateRoomRq",C.JOIN_ROOM_RQ="JoinRoomRq",C.LEAVE_ROOM_RQ="LeaveRoomRq",C.GET_ROOMS_RQ="GetRoomsRq",C.PLAYER_JOINED_MC="PlayerJoinedMC",C.HTTP_GAME_CONFIG="/api/v1/game_config",C.CLIENT_START_CONNECT="CLIENT_START_CONNECT",S._RF.pop()}}}));

System.register("chunks:///_virtual/NetInterface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"59fa8NRXqNA6ZoB5LRw+m7E","NetInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(o){var t,e,n,i,s;return{setters:[function(o){t=o.createClass},function(o){e=o.cclegacy,n=o.isValid,i=o.instantiate},function(o){s=o.Logger}],execute:function(){e._RF.push({},"98d8dJBeClOv4kRv+WtZ/mZ","NodePoolManager",void 0);var l=o("NodePool",function(){function o(o){this.name="UNKNOWN",this.pool=[],this.node=null,this.name=o}var e=o.prototype;return e.clear=function(){for(var o=this.pool.length,t=0;t<o;++t)this.pool[t].destroy();this.pool=[],this.node&&n(this.node)&&this.node.destroy(),this.node=null},e.put=function(o){o&&-1===this.pool.indexOf(o)&&(o.removeFromParent(),this.pool.push(o))},e.get=function(){if(this.pool.length<=0)return this.node?i(this.node):null;var o=this.pool.length-1,t=this.pool[o];return this.pool.length=o,t},t(o,[{key:"cloneNode",get:function(){return this.node},set:function(o){o&&n(o)&&(this.node=o,this.node.removeFromParent())}},{key:"size",get:function(){return this.pool.length}}]),o}());o("NodePoolManager",function(){function o(){this.pools=new Map}o.getInstance=function(){return o.instance||(o.instance=new o),o.instance};var t=o.prototype;return t.createPool=function(o){return this.pools.has(o)||this.pools.set(o,new l(o)),this.pools.get(o)},t.deletePool=function(o){if("string"==typeof o){if(this.pools.has(o)){var t=this.pools.get(o);t&&t.clear(),this.pools.delete(o)}}else o&&o instanceof l&&this.deletePool(o.name)},t.getPool=function(o,t){return void 0===t&&(t=!0),this.pools.has(o)?this.pools.get(o):t?this.createPool(o):null},t.debug=function(){s.getInstance().logView("-------对象池节点缓存信息-------"),this.pools.forEach((function(o,t){s.getInstance().logView(t)}))},o}()).instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts"],(function(n){var t,e,i,o,a,r,l,s,c,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Label,s=n.Animation,c=n.Component},function(n){u=n.LanguageLabel}],execute:function(){var p,f,h,b,y,m,d;a._RF.push({},"01391Mp6X1Gn554rkzavN4K","Notify",void 0);var g=r.ccclass,v=r.property;n("Notify",(p=g("Notify"),f=v(l),h=v(s),p((m=t((y=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"lab_content",m,o(t)),i(t,"animation",d,o(t)),t.onComplete=null,t}e(t,n);var a=t.prototype;return a.onLoad=function(){this.animation&&this.animation.on(s.EventType.FINISHED,this.onFinished,this)},a.onFinished=function(){this.node.parent.destroy(),this.onComplete&&this.onComplete(),this.onComplete=null},a.toast=function(n,t){var e=this.lab_content.getComponent(u);t?(e.enabled=!0,e.dataID=n):(e.enabled=!1,this.lab_content.string=n)},t}(c)).prototype,"lab_content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(y.prototype,"animation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/PromptManager.ts",["cc","./HeronApp.ts","./UIConfig2.ts"],(function(n){var o,e,t;return{setters:[function(n){o=n.cclegacy},function(n){e=n.HeronApp},function(n){t=n.COMMONUIID}],execute:function(){o._RF.push({},"844d6c5qYJKcLZl2gQwd5J9","PromptManager",void 0);n("prompt",new(function(){function n(){this._timeId=""}var o=n.prototype;return o.networkRecovery=function(){this._timeId&&(e.timer.unschedule(this._timeId),this._timeId=""),e.ui.remove(t.wait)},o.netInstableOpen=function(){e.ui.has(t.wait)||e.ui.open(t.wait)},o.netInstableClose=function(){e.ui.has(t.wait)&&e.ui.remove(t.wait)},o.networkLatency=function(n){this._timeId&&e.timer.unschedule(this._timeId),this._timeId=e.timer.scheduleOnce(this.netInstableOpen,n)},o.netReconnectOpen=function(){var n={title:"Tips",content:"Game error, exit the game please!",okWord:"Confirm",cancelWord:"Cancel",okFunc:function(){console.log("okFunc")},cancelFunc:function(){console.log("cancelFunc")},needCancel:!1};e.ui.open(t.alert,n)},o.netReconnectClose=function(){e.ui.has(t.alert)&&e.ui.remove(t.alert)},o.test=function(n){var o={title:"common_prompt_title_sys",content:"common_prompt_content",okWord:"common_prompt_ok",cancelWord:"common_prompt_cancal",okFunc:function(){console.log("okFunc")},cancelFunc:function(){console.log("cancelFunc")},needCancel:!1};e.ui.open(t.confirm,o)},o.alert=function(n,o,c,i){var r={title:c||"common_prompt_title_sys",content:n,okWord:i||"common_prompt_ok",okFunc:function(){o&&o()},needCancel:!1};e.ui.open(t.confirm,r)},o.confirm=function(n,o,c){void 0===c&&(c="common_prompt_ok");var i={title:"common_prompt_title_sys",content:n,okWord:c,cancelWord:"common_prompt_cancal",okFunc:function(){o&&o()},cancelFunc:function(){},needCancel:!0};e.ui.open(t.confirm,i)},n}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/QueryManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,r=t.sys}],execute:function(){e._RF.push({},"dfb4fwS4OZFF7+rcfef3d58","QueryManager",void 0),t("default",function(){function t(){this._data=null,r.isBrowser?this._data=this.parseUrl():this._data={}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.parseUrl=function(){if("object"!=typeof window)return{};if(!window.document)return{};var t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){for(var n={},e=0,r=(t=t[1].split("&")).length;e<r;++e){var i=t[e],o=i.indexOf("=");if(!(o<0)){var s=i.substring(0,o),a=i.substring(o+1);n[decodeURIComponent(s)]=a&&decodeURIComponent(a)}}return n}return{}},n(t,[{key:"data",get:function(){return this._data}}]),t}()).instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/RandomManager.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"3e09eJBwfZBsLPqFszZLvMS","RandomManager",void 0),n("RandomManager",function(){function n(){this.random=null}n.getInstance=function(){return n.instance||(n.instance=new n,this.instance.setRandom(Math.random)),n.instance};var t=n.prototype;return t.setRandom=function(n){this.random=n},t.getRandom=function(){return this.random()},t.getRandomFloat=function(n,t){return void 0===n&&(n=0),void 0===t&&(t=1),this.getRandom()*(t-n)+n},t.getRandomInt=function(n,t,e){switch(void 0===e&&(e=2),n=Math.ceil(n),t=Math.floor(t),e){case 1:return Math.floor(this.getRandom()*(t-n))+n;case 2:return Math.floor(this.getRandom()*(t-n+1))+n;case 3:return Math.floor(this.getRandom()*(t-n-1))+n+1}return 0},t.getRandomByMinMaxList=function(n,t,e){for(var o=[],a=0;a<e;a++)o.push(this.getRandomInt(n,t));return o},t.getRandomByObjectList=function(n,t){for(var e=n.slice(),o=[],a=0;a<t;a++){var r=this.getRandomInt(0,e.length,1);o.push(e.splice(r,1)[0])}return o},t.getRandomBySumList=function(n,t){for(var e=t,o=0,a=[],r=0;r<n;r++)o=this.getRandomInt(0,e,3),r==n-1?o=e:e-=o,a.push(o);return a},n}()).instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,s,o,a,i,u,l,d,c,f,g,p,h,m,y,v,A,B,R;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,o=e.assetManager,a=e.error,i=e.warn,u=e.Asset,l=e.JsonAsset,d=e.Prefab,c=e.SpriteFrame,f=e.Texture2D,g=e.ImageAsset,p=e.AudioClip,h=e.AnimationClip,m=e.Font,y=e.Material,v=e.Mesh,A=e.sp,B=e.js,R=e.resources}],execute:function(){s._RF.push({},"feedbbzq7NDZpAmEHzf2RdJ","ResLoader",void 0),e("ResLoader",function(){function e(){this.defaultBundleName="resources"}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var s=e.prototype;return s.loadRemote=function(e){var n=null,t=null;2==(arguments.length<=1?0:arguments.length-1)?(n=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2]):t=arguments.length<=1?void 0:arguments[1],o.loadRemote(e,n,t)},s.getBundle=function(e){return o.bundles.get(e)},s.loadBundle=function(e){return new Promise((function(n,t){o.loadBundle(e,(function(e,t){if(e)return a(e);n(t)}))}))},s.removeBundle=function(e){var n=o.bundles.get(e);n&&(n.releaseAll(),o.removeBundle(n))},s.preload=function(e,n,t,r,s){var o=null;"string"==typeof n||n instanceof Array?(o=this.parseLoadResArgs(n,t,r,s)).bundle=e:(o=this.parseLoadResArgs(e,n,t,r)).bundle=this.defaultBundleName,o.preload=!0,this.loadByArgs(o)},s.preloadAsync=function(e,n,t){var r=this;return new Promise((function(s,o){r.preload(e,n,t,(function(e,n){e&&i(e.message),s(n)}))}))},s.preloadDir=function(e,n,t,r,s){var o=null;"string"==typeof n?(o=this.parseLoadResArgs(n,t,r,s)).bundle=e:(o=this.parseLoadResArgs(e,n,t,r)).bundle=this.defaultBundleName,o.dir=o.paths,o.preload=!0,this.loadByArgs(o)},s.load=function(e,n,t,r,s){var o=null;"string"==typeof n||n instanceof Array?(o=this.parseLoadResArgs(n,t,r,s)).bundle=e:(o=this.parseLoadResArgs(e,n,t,r)).bundle=this.defaultBundleName,this.loadByArgs(o)},s.loadAsync=function(e,n,t){var r=this;return new Promise((function(s,o){r.load(e,n,t,(function(e,n){e&&(i(e.message),o(e)),s(n)}))}))},s.loadDir=function(e,n,t,r,s){var o=null;"string"==typeof n?(o=this.parseLoadResArgs(n,t,r,s)).bundle=e:(o=this.parseLoadResArgs(e,n,t,r)).bundle=this.defaultBundleName,o.dir=o.paths,this.loadByArgs(o)},s.release=function(e,n){null==n&&(n=this.defaultBundleName);var t=o.getBundle(n);if(t){var r=t.get(e);r&&this.releasePrefabtDepsRecursively(n,r)}},s.releaseDir=function(e,n){var t=this;void 0===n&&(n=this.defaultBundleName);var r=o.getBundle(n);if(r){var s=r.getDirWithPath(e);s&&s.map((function(e){t.releasePrefabtDepsRecursively(n,e.uuid)})),""==e&&"resources"!=n&&o.removeBundle(r)}},s.getAssetPath=function(e,n){return this.getBundle(e).getAssetInfo(n).path},s.releasePrefabtDepsRecursively=function(e,n){if(n instanceof u)n.decRef();else{var t=o.assets.get(n);t&&t.decRef()}},s.debugLogReleasedAsset=function(e,n){if(0==n.refCount){var t=this.getAssetPath(e,n.uuid),r="";r=n instanceof l?"【释放资源】Json【路径】"+t:n instanceof d?"【释放资源】Prefab【路径】"+t:n instanceof c?"【释放资源】SpriteFrame【路径】"+t:n instanceof f?"【释放资源】Texture2D【路径】"+t:n instanceof g?"【释放资源】ImageAsset【路径】"+t:n instanceof p?"【释放资源】AudioClip【路径】"+t:n instanceof h?"【释放资源】AnimationClip【路径】"+t:n instanceof m?"【释放资源】Font【路径】"+t:n instanceof y?"【释放资源】Material【路径】"+t:n instanceof v?"【释放资源】Mesh【路径】"+t:n instanceof A.SkeletonData?"【释放资源】Spine【路径】"+t:"【释放资源】未知【路径】"+t,console.log(r)}},s.get=function(e,n,t){return void 0===t&&(t=this.defaultBundleName),o.getBundle(t).get(e,n)},s.parseLoadResArgs=function(e,n,t,r){var s=e,o=n,a=t,i=r;if(void 0===r){var l=B.isChildClassOf(n,u);t?(i=t,l&&(a=null)):void 0!==t||l||(i=n,a=null,o=null),void 0===t||l||(a=n,o=null)}return{paths:s,type:o,onProgress:a,onComplete:i}},s.loadByBundleAndArgs=function(e,n){n.dir?n.preload?e.preloadDir(n.paths,n.type,n.onProgress,n.onComplete):e.loadDir(n.paths,n.type,n.onProgress,n.onComplete):n.preload?e.preload(n.paths,n.type,n.onProgress,n.onComplete):e.load(n.paths,n.type,n.onProgress,n.onComplete)},s.loadByArgs=function(){var e=t(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.bundle){e.next=12;break}if(!(t=o.bundles.get(n.bundle))){e.next=6;break}this.loadByBundleAndArgs(t,n),e.next=10;break;case 6:return e.next=8,this.loadBundle(n.bundle);case 8:(t=e.sent)&&this.loadByBundleAndArgs(t,n);case 10:e.next=13;break;case 12:this.loadByBundleAndArgs(R,n);case 13:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.dump=function(){o.assets.forEach((function(e,n){console.log("引用数量:"+e.refCount,o.assets.get(n))})),console.log("当前资源总数:"+o.assets.count)},n(e,[{key:"maxConcurrency",get:function(){return o.downloader.maxConcurrency},set:function(e){o.downloader.maxConcurrency=e}},{key:"maxRequestsPerFrame",get:function(){return o.downloader.maxRequestsPerFrame},set:function(e){o.downloader.maxRequestsPerFrame=e}},{key:"maxRetryCount",get:function(){return o.downloader.maxRetryCount},set:function(e){o.downloader.maxRetryCount=e}},{key:"retryInterval",get:function(){return o.downloader.retryInterval},set:function(e){o.downloader.retryInterval=e}}]),e}()).instance=void 0,s._RF.pop()}}}));

System.register("chunks:///_virtual/RootComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,e,r;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,r=o.Component}],execute:function(){t._RF.push({},"a3698Hsn41FpbxLJ7FAOSmr","RootComponent",void 0);e.ccclass,e.property,o("RootComponent",function(o){function t(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(n=o.call.apply(o,[this].concat(e))||this).persist=null,n}n(t,o);var e=t.prototype;return e.__preload=function(){},e.onLoad=function(){},e.start=function(){},e.update=function(o){},t}(r));t._RF.pop()}}}));

System.register("chunks:///_virtual/SeedRandom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RandomManager.ts"],(function(n){var t,e,r;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){r=n.RandomManager}],execute:function(){e._RF.push({},"9b02bnNwwZEWq9Ft59BRCIB","SeedRandom",void 0);n("SeedRandom",function(){function n(n){this.rm=void 0,this.sr=void 0,this.sr=new Math.seedrandom(n),this.rm=new r,this.rm.setRandom(this.sr)}return n.prototype.destroy=function(){this.rm=null,this.sr=null},t(n,[{key:"random",get:function(){return this.rm}}]),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./StorageSecuritySimple.ts"],(function(e){var t,n,r,i,o;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e.sys},function(e){i=e.PREVIEW},function(e){o=e.StorageSecuritySimple}],execute:function(){n._RF.push({},"909e6TUkWVAKKBXvD5u2gVz","StorageManager",void 0),e("default",function(){function e(){this.id=null,this.iss=null,this.init(new o)}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var n=e.prototype;return n.init=function(e){this.iss=e},n.setUser=function(e){this.id=e},n.set=function(e,t){var n=this.getKey(e);if(null!=e){if(this.encrypted&&(n=this.iss.encryptKey(n)),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error("解析失败，str = "+t)}else"number"==typeof t?t+="":"boolean"==typeof t&&(t=String(t));this.encrypted&&(t=this.iss.encrypt(t)),r.localStorage.setItem(n,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")},n.get=function(e,t){if(void 0===t&&(t=""),null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted&&(e=this.iss.encryptKey(e));var n=r.localStorage.getItem(e);return null!=n&&""!==n&&this.encrypted&&(n=this.iss.decrypt(n)),null===n?t:n},n.getNumber=function(e,t){void 0===t&&(t=0);var n=this.get(e);return"0"==n?Number(n):Number(n)||t},n.getBoolean=function(e){return"true"===this.get(e).toLowerCase()},n.getJson=function(e,t){var n=this.get(e);return n&&JSON.parse(n)||t},n.remove=function(e){if(null!=e){var t=this.getKey(e);this.encrypted&&(t=this.iss.encryptKey(t)),r.localStorage.removeItem(t)}else console.error("存储的key不能为空")},n.clear=function(){r.localStorage.clear()},n.getKey=function(e){return null==this.id||""==this.id?e:this.id+"_"+e},t(e,[{key:"encrypted",get:function(){return!i}}]),e}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/StorageSecurityCrypto.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dd00aL2sUpNYJ/Kdkw/+zHY","StorageSecurityCrypto",void 0);t("StorageSecurityCrypto",function(){function t(){}var e=t.prototype;return e.decrypt=function(t){throw new Error("Method not implemented.")},e.encrypt=function(t){throw new Error("Method not implemented.")},e.encryptKey=function(t){throw new Error("Method not implemented.")},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/StorageSecuritySimple.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2adb9Rs3YVF74traVP2PWB/","StorageSecuritySimple",void 0);e("StorageSecuritySimple",function(){function e(){this.secretkey=null;this.secretkey="HeronKeyHeronIv"}var t=e.prototype;return t.encrypt=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^this.secretkey.charCodeAt(r%this.secretkey.length));return t},t.decrypt=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)^this.secretkey.charCodeAt(r%this.secretkey.length));return t},t.encryptKey=function(e){return this.encrypt(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"ab445LbDupIG4Gxv2g23huT","StringUtil",void 0);r("StringUtil",function(){function r(){}return r.guid=function(){for(var r="",t=1;t<=32;t++){r+=Math.floor(16*Math.random()).toString(16),8!=t&&12!=t&&16!=t&&20!=t||(r+="-")}return r},r.gmsgid=function(){return"msg_"+this.guid()},r.numberTotPermil=function(r){return r.toLocaleString()},r.numberToThousand=function(r,t){void 0===t&&(t=2);var n=1e3;if(r<n)return r.toString();var o=Math.floor(Math.log(r)/Math.log(n));return(r/Math.pow(n,o)).toFixed(t)+["","K","M","G"][o]},r.numberToTenThousand=function(r,t){void 0===t&&(t=2);var n=1e4;if(r<n)return r.toString();var o=Math.floor(Math.log(r)/Math.log(n));return(r/Math.pow(n,o)).toFixed(t)+["","万","亿","万亿"][o]},r.stringToArray1=function(r){return""==r?[]:r.split(",")},r.stringToArray2=function(r){return""==r?[]:r.split("|")},r.stringToArray3=function(r){return""==r?[]:r.split(":")},r.stringToArray4=function(r){return""==r?[]:r.split(";")},r.sub=function(r,t,n){void 0===n&&(n=!1);var o=/[^\x00-\xff]/g;if(r.replace(o,"mm").length<=t)return r;for(var e=Math.floor(t/2);e<r.length;e++)if(r.substr(0,e).replace(o,"mm").length>=t)return n?r.substr(0,e)+"...":r.substr(0,e);return r},r.stringLen=function(r){for(var t=0,n=r.length,o=-1,e=0;e<n;e++)t+=(o=r.charCodeAt(e))>=0&&o<=128?1:2;return t},r.IsEmpty=function(r){return null==r||null==r||0==r.length},r.substitute=function(r){if(null==r)return"";for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var e,u=n.length;1==u&&n[0]instanceof Array?u=(e=n[0]).length:e=n;for(var i=0;i<u;i++)r=r.replace(new RegExp("\\{"+i+"\\}","g"),e[i]);return r},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"c0c4fOJ7lZAD54DAYHLYXYt","test",void 0);var t=e("GameCloudTokenGenerator",function(){function e(){}return e.generateToken=function(e,r){var t=Math.floor(Date.now()/1e3),n={exp:t+this.TOKEN_EXPIRE_SECONDS,iat:t,uid:e.uid,gid:r,username:e.username,nickname:e.nickname,avatar:e.avatar,balance:e.balance,level:e.level,user_exp:e.exp},a=this.base64UrlEncode(JSON.stringify({alg:"HS256",typ:"JWT"}))+"."+this.base64UrlEncode(JSON.stringify(n)),o=this.hmacSha256(a,this.JWT_SECRET);return a+"."+this.base64UrlEncode(o)},e.verifyToken=function(e){try{var r=e.split(".");if(3!==r.length)return{valid:!1,error:"Invalid token format"};var t=r[0],n=r[1],a=r[2],o=t+"."+n,i=this.hmacSha256(o,this.JWT_SECRET);if(a!==this.base64UrlEncode(i))return{valid:!1,error:"Invalid signature"};var c=this.base64UrlDecode(n),h=JSON.parse(c),s=Math.floor(Date.now()/1e3);return h.exp<s?{valid:!1,error:"Token expired"}:{valid:!0,payload:h}}catch(e){return{valid:!1,error:"Token parsing error"}}},e.decodeToken=function(e){try{var r=e.split(".");if(3!==r.length)return null;var t=this.base64UrlDecode(r[1]);return JSON.parse(t)}catch(e){return console.error("Token decode error:",e),null}},e.isTokenExpiringSoon=function(e,r){void 0===r&&(r=300);var t=this.decodeToken(e);if(!t)return!0;var n=Math.floor(Date.now()/1e3);return t.exp-n<=r},e.getTokenRemainingTime=function(e){var r=this.decodeToken(e);if(!r)return-1;var t=Math.floor(Date.now()/1e3);return Math.max(0,r.exp-t)},e.base64UrlEncode=function(e){return("undefined"!=typeof btoa?btoa(unescape(encodeURIComponent(e))):this.base64Encode(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},e.base64UrlDecode=function(e){for(var r=e.replace(/-/g,"+").replace(/_/g,"/");r.length%4;)r+="=";return"undefined"!=typeof atob?decodeURIComponent(escape(atob(r))):this.base64Decode(r)},e.base64Encode=function(e){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="",n=0;n<e.length;){var a=e.charCodeAt(n++)<<16|(n<e.length?e.charCodeAt(n++):0)<<8|(n<e.length?e.charCodeAt(n++):0);t+=r.charAt(a>>18&63),t+=r.charAt(a>>12&63),t+=n-2<e.length?r.charAt(a>>6&63):"=",t+=n-1<e.length?r.charAt(63&a):"="}return t},e.base64Decode=function(e){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="",n=0;n<e.length;){var a=r.indexOf(e.charAt(n++)),o=r.indexOf(e.charAt(n++)),i=r.indexOf(e.charAt(n++)),c=r.indexOf(e.charAt(n++)),h=a<<18|o<<12|i<<6|c;t+=String.fromCharCode(h>>16&255),64!==i&&(t+=String.fromCharCode(h>>8&255)),64!==c&&(t+=String.fromCharCode(255&h))}return t},e.hmacSha256=function(e,r){for(r.length>64&&(r=this.sha256(r));r.length<64;)r+="\0";for(var t="",n="",a=0;a<64;a++){var o=r.charCodeAt(a);t+=String.fromCharCode(54^o),n+=String.fromCharCode(92^o)}var i=this.sha256(t+e);return this.sha256(n+i)},e.sha256=function(e){for(var r=0,t=0;t<e.length;t++){r=(r<<5)-r+e.charCodeAt(t),r&=r}return Math.abs(r).toString(16).padStart(8,"0")},e}());t.JWT_SECRET="gamecloud-secret-key-2025",t.TOKEN_EXPIRE_SECONDS=86400,r._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"6021fct1uhJsImEuhdFWC0f","Timer",void 0);e("Timer",function(){function e(e){void 0===e&&(e=0),this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}var s=e.prototype;return s.update=function(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,null==(t=this.callback)||t.call(this),!0));var t},s.reset=function(){this._elapsedTime=0},s.stop=function(){this._elapsedTime=0,this.step=-1},t(e,[{key:"elapsedTime",get:function(){return this._elapsedTime}},{key:"step",get:function(){return this._step},set:function(e){this._step=e,this._elapsedTime=0}},{key:"progress",get:function(){return this._elapsedTime/this._step}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Timer.ts","./StringUtil.ts"],(function(e){var t,i,n,s,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.game,s=e.Component},function(e){r=e.Timer},function(e){o=e.StringUtil}],execute:function(){i._RF.push({},"73600VLsIBLOKhOhd7td4P8","TimerManager",void 0);e("TimerManager",function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).times={},t.date_s=new Date,t.date_s_start=new Date,t.polymeric_s=0,t.date_c=new Date,t}t(i,e);var s=i.prototype;return s.update=function(e){for(var t in this.times){var i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}},s.onTimerComplete=function(e){e.onComplete&&e.onComplete.call(e.target,e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]},s.register=function(e,t,i,n,s){var a=new r;a.step=1;var m={};return m.id=o.guid(),m.timer=a,m.object=e,m.field=t,m.onSecond=n,m.onComplete=s,m.target=i,this.times[m.id]=m,m.id},s.unRegister=function(e){this.times[e]&&delete this.times[e]},s.scheduleOnce=function(e,t){var i=new r;i.step=1;var n={};return n.id=o.guid(),n.timer=i,n.onComplete=e,n.field=t,n.target=this,this.times[n.id]=n,n.id},s.setServerTime=function(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)},s.getServerTime=function(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s},s.getServerDate=function(){return this.date_s.setTime(this.getServerTime()),this.date_s},s.getClientTime=function(){return Date.now()},s.getClientDate=function(){return this.date_c.setTime(this.getClientTime()),this.date_c},s.getTime=function(){return n.totalTime},s.save=function(){for(var e in this.times)this.times[e].startTime=this.getTime()},s.load=function(){for(var e in this.times){var t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}},i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/Toggle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,o,a,c,l,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.SpriteFrame,l=e.Sprite,s=e.Component}],execute:function(){var u,p,h,d,m,f,g,C,k;o._RF.push({},"9c206CiTTFMRritCOPrlKQf","Toggle",void 0);var F=a.ccclass,b=a.property,y=a.executeInEditMode;e("Toggle",(u=F("Toggle"),p=b(c),h=b(c),u(d=y((f=i((m=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,r(i,"normalFrame",f,n(i)),r(i,"checkedFrame",g,n(i)),r(i,"isChecked",C,n(i)),r(i,"isCanClick",k,n(i)),i._sprite=null,i}t(i,e);var o=i.prototype;return o.onLoad=function(){this._sprite=this.node.getChildByName("icon").getComponent(l),this._sprite?this.updateSpriteFrame():console.error("SpriteToggle: No Sprite component found on this node!")},o.onToggleClick=function(){this.isChecked=!this.isChecked,this.isCanClick&&this.updateSpriteFrame()},o.updateSpriteFrame=function(){this._sprite&&(this._sprite.spriteFrame=this.isChecked?this.checkedFrame:this.normalFrame)},o.enable=function(e){this.isChecked=e,this.updateSpriteFrame()},o.getChecked=function(){return this.isChecked},i}(s)).prototype,"normalFrame",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(m.prototype,"checkedFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(m.prototype,"isChecked",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=i(m.prototype,"isCanClick",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=m))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/TopMeun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./NetDefine.ts"],(function(n){var o,e,t,r,c,u,i,s;return{setters:[function(n){o=n.inheritsLoose,e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,c=n._decorator,u=n.Component},function(n){i=n.HeronApp},function(n){s=n.default}],execute:function(){var p;r._RF.push({},"05012kY1pVME5DU+c9Orfpz","TopMeun",void 0);var a=c.ccclass;c.property,n("TopMeun",a("TopMeun")(p=function(n){function r(){return n.apply(this,arguments)||this}o(r,n);var c=r.prototype;return c.start=function(){},c.onClickRules=function(){console.log("打开游戏规则界面")},c.onClickMute=function(){var n=e(t().mark((function n(){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("切换静音状态");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),c.onClickShare=function(){console.log("打开分享界面")},c.onClickExit=function(){console.log("退出游戏"),i.webSocket.sendMsg(s.LEAVE_ROOM_RQ,{})},c.update=function(n){},r}(u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"1e331+j5e1O3Z/vJ49bImKK","UIConfig",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig2.ts",["cc","./LayerEnum.ts"],(function(e){var a,n;return{setters:[function(e){a=e.cclegacy},function(e){n=e.LayerType}],execute:function(){var o;a._RF.push({},"66043IlbaxInIzISsGiGE16","UIConfig",void 0);var r=e("COMMONUIID",function(e){return e[e.wait=10001]="wait",e[e.alert=10002]="alert",e[e.confirm=10003]="confirm",e[e.commonUI=10004]="commonUI",e[e.playersView=10005]="playersView",e[e.topMenu=10006]="topMenu",e[e.inviteFriends=10007]="inviteFriends",e}({}));e("CommonUIData",((o={})[r.alert]={layer:n.Dialog,prefab:"common/prefab/alert"},o[r.confirm]={layer:n.Dialog,prefab:"common/prefab/confirm"},o[r.wait]={layer:n.PopUp,prefab:"common/prefab/wait"},o[r.commonUI]={layer:n.System,prefab:"common/ui/commonUI"},o[r.playersView]={layer:n.PopUp,prefab:"common/ui/playersView",vacancy:!0,mask:!0},o[r.topMenu]={layer:n.PopUp,prefab:"common/ui/topMenu",vacancy:!0,mask:!0},o[r.inviteFriends]={layer:n.PopUp,prefab:"common/ui/inviteFriends",vacancy:!0,mask:!0},o));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIDefine.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d1bf4iDwmtMzY9cE3eltX6f","UIDefine",void 0);e("ViewParams",(function(){this.uiid=-1,this.config=null,this.params=null,this.callbacks=null,this.valid=!0,this.node=null})),e("UIConfigList",[{name:"LayerGame",type:"Node"},{name:"LayerUI",type:"UI"},{name:"LayerSystem",type:"UI"},{name:"LayerPopUp",type:"PopUp"},{name:"LayerDialog",type:"Dialog"},{name:"LayerNotify",type:"Notify"},{name:"LayerGuide",type:"Node"}]),e("PromptResType",function(e){return e.Toast="common/prefab/notify",e.Wait="common/prefab/wait",e.Mask="common/prefab/mask",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDefine.ts","./LayerEnum.ts","./LayerNotify.ts","./LayerUI.ts","./LayerPopup.ts","./LayerDialog.ts","./DelegateComponent.ts","./HeronApp.ts"],(function(e){var n,t,i,o,r,s,a,c,u,f,l,p,h,y,v,d,g;return{setters:[function(e){n=e.extends,t=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,r=e.Camera,s=e.Node,a=e.Layers,c=e.Widget},function(e){u=e.UIConfigList},function(e){f=e.LayerTypeCls,l=e.LayerType},function(e){p=e.LayerNotify},function(e){h=e.LayerUI},function(e){y=e.LayerPopUp},function(e){v=e.LayerDialog},function(e){d=e.DelegateComponent},function(e){g=e.HeronApp}],execute:function(){o._RF.push({},"ef7db1JXFZI/qq7Oz6OyGDN","UIManager",void 0);var m=1e6,L=m;function w(){return 9999999==L&&(L=m),++L}e("default",function(){function e(){this.root=void 0,this.camera=void 0,this.guide=void 0,this.configs={},this.notify=void 0,this.uiLayers=new Map,this.clsLayers=new Map,this.clsLayers.set(f.UI,h),this.clsLayers.set(f.PopUp,y),this.clsLayers.set(f.Dialog,v),this.clsLayers.set(f.Notify,p),this.clsLayers.set(f.Node,null)}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var o=e.prototype;return o.initConfig=function(e){this.configs=n({},e,this.configs)},o.init=function(e){this.root=e,this.camera=this.root.getComponentInChildren(r),this.createUI()},o.toast=function(e,n){void 0===n&&(n=!1),this.notify.toast(e,n)},o.waitOpen=function(){this.notify.waitOpen()},o.waitClose=function(){this.notify.waitClose()},o.open=function(e,n,t){void 0===n&&(n=null);var i=this.configs[e];if(null!=i){var o=this.uiLayers.get(i.layer);o?o.add(e,i,n,t):console.error("打开编号为【"+e+"】的界面失败，界面层不存在")}else console.warn("打开编号为【"+e+"】的界面失败，配置信息不存在")},o.openAsync=function(){var e=t(i().mark((function e(n,t){var o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=null),e.abrupt("return",new Promise((function(e,i){var r={onAdded:function(n,t){e(n)},onLoadFailure:function(){e(null)}};o.open(n,t,r)})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),o.openAsyncConfig=function(e){var n=this;return new Promise(t(i().mark((function t(o,r){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=w(),e.auto=!0,n.setConfig(s,e),t.next=5,g.ui.openAsync(s,{uiid:s});case 5:o(s);case 6:case"end":return t.stop()}}),t)}))))},o.replace=function(e,n,t){var i=this;void 0===t&&(t=null);var o={onAdded:function(n,t){i.remove(e)}};this.open(n,t,o)},o.replaceAsync=function(e,n,o){var r=this;return void 0===o&&(o=null),new Promise(t(i().mark((function t(s,a){var c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.openAsync(n,o);case 2:(c=t.sent)?(r.remove(e),s(c)):s(null);case 4:case"end":return t.stop()}}),t)}))))},o.has=function(e){var n=this.configs[e];if(null==n)return console.warn("编号为【"+e+"】的界面配置不存在，配置信息不存在"),!1;var t=!1,i=this.uiLayers.get(n.layer);return i&&(t=i.has(n.prefab)),t},o.get=function(e){var n=this.configs[e];if(null==n)return console.warn("编号为【"+e+"】的界面配置不存在，配置信息不存在"),null;var t=null,i=this.uiLayers.get(n.layer);return i?t=i.get(n.prefab):console.error("获取编号为【"+e+"】的界面失败，界面层不存在"),t},o.setConfig=function(e,n){n?this.configs[e]=n:delete this.configs[e]},o.remove=function(e,n){void 0===n&&(n=!0);var t=this.configs[e];if(null!=t){var i=this.uiLayers.get(t.layer);i?i.remove(t.prefab,n):console.error("移除编号为【"+e+"】的界面失败，界面层不存在")}else console.warn("删除编号为【"+e+"】的界面失败，配置信息不存在")},o.removeByNode=function(e,n){if(void 0===n&&(n=!0),e instanceof s){var t=e.getComponent(d);if(t&&t.vp){if(e.parent)this.remove(t.vp.uiid,n);else if(n){var i=this.uiLayers.get(t.vp.config.layer);i&&i.removeCache(t.vp.config.prefab)}}else console.warn("当前删除的 Node 不是通过界面管理器添加"),e.destroy()}},o.clear=function(e){void 0===e&&(e=!1),this.uiLayers.forEach((function(n){n.clear(e)}))},o.createUI=function(){for(var e=0;e<u.length;e++){var n=u[e],t=null;if(n.type==f.Node)switch(t=this.create_node(n.name),n.name){case l.Guide:this.guide=t}else{var i=this.clsLayers.get(n.type);i?t=new i(n.name):console.error("未识别的界面层类型",n.type)}this.root.addChild(t),t instanceof h?this.uiLayers.set(n.name,t):t instanceof p&&(this.notify=t)}},o.create_node=function(e){var n=new s(e);n.layer=a.Enum.UI_2D;var t=n.addComponent(c);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,n},e}()).instance=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts"],(function(e){var n,t,o,r,a,i,c,u,l,s,f;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,r=e.UITransform,a=e.v3,i=e.Size,c=e.Prefab,u=e.instantiate,l=e.Animation,s=e.AnimationClip},function(e){f=e.HeronApp}],execute:function(){o._RF.push({},"5e964VjiaVNHrHeKsh5b4VR","ViewUtil",void 0);e("ViewUtil",function(){function e(){}return e.nodeTreeInfoLite=function(n,t){for(var o=t||new Map,r=n.children,a=0;a<r.length;a++){var i=r[a];i.name.length>0&&(o.has(i.name)?console.error("使用ViewUtil.nodeTreeInfoLite方法时发现重复的节点名称【"+i.name+"】"):o.set(i.name,i)),e.nodeTreeInfoLite(i,o)}return o},e.findNodes=function(n,t,o){for(var r=o||[],a=t.children,i=0;i<a.length;i++){var c=a[i].name;n.test(c)&&r.push(a[i]),e.findNodes(n,a[i],r)}return r},e.calculateASpaceToBSpacePos=function(e,n,t){var o=e.getComponent(r).convertToWorldSpaceAR(t);return n.getComponent(r).convertToNodeSpaceAR(o)},e.calculateScreenPosToSpacePos=function(e,n){var t=e.getUILocation(),o=a(t.x,t.y);return n.getComponent(r).convertToNodeSpaceAR(o)},e.uniformScale=function(e,n,t,o){var r,a=t/e,c=o/n;return r=a<c?a:c,new i(Math.floor(e*r),Math.floor(n*r))},e.createPrefabNode=function(e,n){void 0===n&&(n=f.res.defaultBundleName);var t=f.res.get(e,c,n);return t?u(t):null},e.createPrefabNodeAsync=function(e,o){return void 0===o&&(o=f.res.defaultBundleName),new Promise(n(t().mark((function n(r,a){var i;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.res.loadAsync(o,e,c);case 2:(i=n.sent)?r(u(i)):(console.error("名为【"+e+"】的资源加载失败"),r(null));case 4:case"end":return n.stop()}}),n)}))))},e.addNodeAnimation=function(e,n,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!1),n&&n.isValid){var r=n.getComponent(l);null==r&&(r=n.addComponent(l));var a=f.res.get(e,s);if(a&&!(t&&r.getState(a.name)&&r.getState(a.name).isPlaying)){if(o)return r.defaultClip=a,void r.play();r.once(l.EventType.FINISHED,(function(){r.defaultClip&&r.play()}),this),r.getState(a.name)||r.createState(a,a.name),r.play(a.name)}}},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/VoiceChatManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AgoraSDK2.ts"],(function(t){var e,r,o,n;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){n=t.AgoraSDK2}],execute:function(){o._RF.push({},"949756p+CtAwq28pGunkgO/","VoiceChatManager",void 0);t("default",function(){function t(){this.agoraSDK=void 0,this.isInitialized=!1,this.agoraSDK=new n,this.setupEventListeners()}var o=t.prototype;return o.init=function(){var t=e(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.agoraSDK.initialize(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.joinVoiceRoom=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.joinChannel();case 3:this.isInitialized=!0,console.log("【agora】成功加入语音房间"),this.displayStatus(),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),console.error("【agora】加入语音房间失败:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),o.requestMic=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isInitialized){t.next=2;break}throw new Error("【agora】请先加入房间");case 2:return t.prev=2,t.next=5,this.agoraSDK.joinMic();case 5:console.log("【agora】上麦成功"),this.updateMicButton(),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(2),console.error("【agora】上麦失败:",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),o.leaveMic=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.leaveMic();case 3:console.log("【agora】下麦成功"),this.updateMicButton(),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.error("【agora】下麦失败:",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),o.toggleMute=function(){var t=e(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.toggleMic();case 3:e=t.sent,console.log("【agora】",e?"开麦成功":"关麦成功"),this.updateMuteButton(),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),console.error("【agora】切换麦克风状态失败:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),o.muteUser=function(){var t=e(r().mark((function t(e,o){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.muteRemoteUser(e,o);case 3:console.log("【agora】"+(o?"静音":"取消静音")+"用户 "+e+" 成功"),this.updateUserList(),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.error("【agora】操作用户静音状态失败:",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}(),o.setUserVolume=function(){var t=e(r().mark((function t(e,o){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.setRemoteUserVolume(e,o);case 3:console.log("【agora】设置用户 "+e+" 音量为 "+o),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.error("【agora】设置用户音量失败:",t.t0),t.t0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e,r){return t.apply(this,arguments)}}(),o.leaveRoom=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.leaveChannel();case 3:console.log("【agora】已离开房间"),this.isInitialized=!1,t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.error("【agora】离开房间失败:",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),o.destroy=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.agoraSDK.destroy();case 3:console.log("资源已销毁"),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.error("销毁资源失败:",t.t0),t.t0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),o.setupEventListeners=function(){var t=this;this.agoraSDK.on("user-joined",(function(e){console.log("【agora】用户 "+e.uid+" 加入房间"),t.updateUserList()})),this.agoraSDK.on("user-left",(function(e,r){console.log("【agora】用户 "+e.uid+" 离开房间，原因: "+r),t.updateUserList()})),this.agoraSDK.on("user-published",(function(e,r){"audio"===r&&(console.log("【agora】用户 "+e.uid+" 开始说话"),t.updateUserList())})),this.agoraSDK.on("user-unpublished",(function(e,r){"audio"===r&&(console.log("【agora】用户 "+e.uid+" 停止说话"),t.updateUserList())})),this.agoraSDK.on("microphone-state-change",(function(e){console.log("【agora】麦克风状态: "+(e?"已上麦":"已下麦")),t.updateMicButton()})),this.agoraSDK.on("volume-indicator",(function(e){e.forEach((function(e){var r=e.uid,o=e.level;t.updateUserVolume(r,o)}))})),this.agoraSDK.on("connection-state-change",(function(e,r,o){console.log("【agora】连接状态变化: "+r+" -> "+e+", 原因: "+o),t.updateConnectionStatus(e)})),this.agoraSDK.on("network-quality",(function(e){console.log("【agora】网络质量:",e),t.updateNetworkQuality(e)}))},o.displayStatus=function(){var t=this.agoraSDK.getStatus();console.log("【agora】当前状态:",t)},o.updateMicButton=function(){var t=this.agoraSDK.getLocalUserInfo();console.log("【agora】",t.isMuted?"开麦":"关麦"),t.isOnMic},o.updateMuteButton=function(){this.updateMicButton()},o.updateUserList=function(){var t=this.agoraSDK.getRemoteUsers();console.log("【agora】更新用户列表：",t)},o.updateUserVolume=function(t,e){console.log("【agora】"+e+"%")},o.updateConnectionStatus=function(t){console.log("【agora】status-"+t.toLowerCase())},o.updateNetworkQuality=function(t){console.log("【agora】网络质量: "+t.uplinkNetworkQuality+"/6")},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["cc","./HeronApp.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.HeronApp}],execute:function(){e._RF.push({},"9e8da2UsBBFV63yONcZaRbo","WebSock",void 0);t("WebSock",function(){function t(){this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}var e=t.prototype;return e.connect=function(t){var e=this;if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return n.log.logNet("websocket connecting, wait for a moment..."),!1;var s=null;if(t.url)s=t.url;else{var o=t.ip,r=t.port;s=t.protocol+"://"+o+":"+r}return this._ws=new WebSocket(s),this._ws.binaryType=t.binaryType?t.binaryType:"arraybuffer",this._ws.onmessage=function(t){(0,e.onMessage)(t.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0},e.send=function(t){return this._ws&&this._ws.readyState==WebSocket.OPEN?(this._ws.send(t),1):-1},e.close=function(t,e){this._ws&&this._ws.close(t,e)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/WebsocketHelper.ts",["cc","./HeronApp.ts","./NetDefine.ts","./StringUtil.ts"],(function(e){var t,n,a,r;return{setters:[function(e){t=e.cclegacy},function(e){n=e.HeronApp},function(e){a=e.default},function(e){r=e.StringUtil}],execute:function(){t._RF.push({},"9e83cPht51N+ZiNVF4dqjW2","WebsocketHelper",void 0);e("default",function(){function e(){}var t=e.prototype;return t.init=function(){},t.getHeadlen=function(){return console.log("getHeadlen not implemented."),1},t.getHearbeat=function(){var e=n.netMsg.getMsgToCode(a.HEART_BEAT_RQ);return{header:{messageType:Number(e),timestamp:Date.now()},data:{}}},t.getPackageLen=function(e){return JSON.stringify(e).length},t.checkResponsePackage=function(e){return!0},t.handlerRequestPackage=function(e,t){var a=n.netMsg.getMsgToCode(e),s=n.data.getData("gameID"),g=n.data.getData("userID"),o=n.data.getData("roomID");return{messageID:r.gmsgid(),messageType:Number(a),data:t,timestamp:Date.now(),gameID:s,userID:g,roomID:o}},t.handlerResponsePackage=function(e){var t=e.messageType;if(e.header&&5==(t=e.header.messageType))return!0;var a=n.netMsg.getRqCodeToRsCode(t),r=n.netMsg.getCodeToMsg(a);return n.log.logNet("【===收到===】【"+r.msg_id+"】【"+t+"】的消息:",e.data),n.message.dispatchEvent(r.msg_id,e.data),!0},t.getPackageId=function(e){var t=e.messageType;return e.header&&(t=e.header.messageType),t},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/WebSocketManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./WebSock.ts"],(function(e){var t,n,s,i;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){s=e.Logger},function(e){i=e.WebSock}],execute:function(){n._RF.push({},"d4a21ss6OlIwKDQvVMcSRZX","WebSocketManager",void 0);var o=["已关闭","连接中","验证中","可传输数据"],c=e("NetTipsType",function(e){return e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting",e}({})),r=e("NetNodeState",function(e){return e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Checking=2]="Checking",e[e.Working=3]="Working",e}({}));e("default",function(){function e(){this._connectOptions=null,this._autoReconnect=0,this._isSocketInit=!1,this._isSocketOpen=!1,this._state=r.Closed,this._socket=new i,this._networkTips=null,this._protocolHelper=null,this._connectedCallback=null,this._disconnectCallback=null,this._callbackExecuter=null,this._keepAliveTimer=null,this._receiveMsgTimer=null,this._reconnectTimer=null,this._heartTime=0,this._receiveTime=6e6,this._reconnetTimeOut=8e6,this._requests=Array(),this._listener={}}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var n=e.prototype;return n.init=function(e,t){void 0===e&&(e=null),this._networkTips=e,this._protocolHelper=t,e.init()},n.connect=function(e){return console.log("[WebSocketManager] connect: "+JSON.stringify(e)),!(!this._socket||this._state!=r.Closed)&&(this._isSocketInit||this.initSocket(),this._state=r.Connecting,this._socket.connect(e)?(null==this._connectOptions&&"number"==typeof e.autoReconnect&&(this._autoReconnect=e.autoReconnect),this._connectOptions=e,this.updateNetTips(c.Connecting,!0),!0):(this.updateNetTips(c.Connecting,!1),!1))},n.initSocket=function(){var e=this;this._socket&&(this._socket.onConnected=function(t){e.onConnected(t)},this._socket.onMessage=function(t){e.onMessage(t)},this._socket.onError=function(t){e.onError(t)},this._socket.onClosed=function(t){e.onClosed(t)},this._isSocketInit=!0)},n.updateNetTips=function(e,t){this._networkTips&&(e==c.Requesting?this._networkTips.requestTips(t):e==c.Connecting?this._networkTips.connectTips(t):e==c.ReConnecting&&this._networkTips.reconnectTips(t))},n.onConnected=function(e){var t=this;s.getInstance().logNet("网络已连接"),this._isSocketOpen=!0,null!==this._connectedCallback?(this._state=r.Checking,this._connectedCallback((function(){t.onChecked()}))):this.onChecked(),s.getInstance().logNet("网络已连接当前状态为【"+o[this._state]+"】"),this.resetReceiveMsgTimer(),this.resetHearbeatTimer()},n.onChecked=function(){s.getInstance().logNet("连接验证成功，进入工作状态"),this._state=r.Working,this.updateNetTips(c.Connecting,!1),this.updateNetTips(c.ReConnecting,!1);var e=this._requests.concat();if(e.length>0){s.getInstance().logNet("请求【"+this._requests.length+"】个待发送的信息");for(var t=0;t<e.length;){var n=e[t];this._socket.send(n.buffer),null==n.rspObject||""!=n.rspCmd?e.splice(t,1):++t}this.updateNetTips(c.Requesting,this._requests.length>0)}},n.onMessage=function(e){var n=JSON.parse(e);if(this._protocolHelper.checkResponsePackage(n)){this._protocolHelper.handlerResponsePackage(n)||this._networkTips&&this._networkTips.responseErrorCode(n.error&&n.error.code);var i=this._protocolHelper.getPackageId(n);if(i&&5!=i&&s.getInstance().logNet("接受到命令【"+i+"】的消息",n),this._requests.length>0){for(var o in this._requests){var r=this._requests[o];if(r.rspCmd==i&&r.rspObject){s.getInstance().logNet("触发请求命令【"+i+"】的回调"),this._callbackExecuter(r.rspObject,n.data),this._requests.splice(parseInt(o),1);break}}0==this._requests.length&&this.updateNetTips(c.Requesting,!1)}var l=this._listener[i];if(null!=l)for(var a,h=t(l);!(a=h()).done;){var u=a.value;s.getInstance().logNet("触发监听命令【"+i+"】的回调"),this._callbackExecuter(u,n.data)}}else console.error("校验接受消息数据异常")},n.onError=function(e){s.getInstance().logNet(e,"网络错误"),console.error(e)},n.onClosed=function(e){var t=this;s.getInstance().logNet(e,"网络断开"),this.clearTimer(),this._disconnectCallback?s.getInstance().logNet("onClosed +> 断开连接"):this.isAutoReconnect()?(s.getInstance().logNet("onClosed +> 自动重连"),this.updateNetTips(c.ReConnecting,!0),this._reconnectTimer=setTimeout((function(){t._socket.close(),t._state=r.Closed,t.connect(t._connectOptions),t._autoReconnect>0&&(t._autoReconnect-=1)}),this._reconnetTimeOut)):(this._state=r.Closed,this._networkTips.connectCloseTips())},n.close=function(e,t){this.clearTimer(),this._listener={},this._requests.length=0,this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=r.Closed},n.closeSocket=function(e,t){this._socket&&this._socket.close(e,t)},n.send=function(e,t){return void 0===t&&(t=!1),this._state==r.Working||t?this._socket.send(e):this._state==r.Checking||this._state==r.Connecting?(this._requests.push({buffer:e,rspCmd:"",rspObject:null}),s.getInstance().logNet("当前状态为【"+o[this._state]+"】,繁忙并缓冲发送数据"),0):(console.error("当前状态为【"+o[this._state]+"】,请求错误"),-1)},n.sendMsg=function(e,t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!0),void 0===o&&(o=!1);var l=this._protocolHelper.handlerRequestPackage(e,t);s.getInstance().logNet("【===发送===】:",e,l);var a=JSON.stringify(l);(this._state==r.Working||o)&&this._socket.send(a),this._requests.push({buffer:a,rspCmd:e,rspObject:n}),i&&this.updateNetTips(c.Requesting,!0)},n.base_request=function(e,t,n,i,o){void 0===i&&(i=!0),void 0===o&&(o=!1);var l=JSON.stringify(e);(this._state==r.Working||o)&&this._socket.send(l),s.getInstance().logNet("队列命令为【"+t+"】的请求，等待请求数据的回调"),this._requests.push({buffer:l,rspCmd:t,rspObject:n}),i&&this.updateNetTips(c.Requesting,!0)},n.setResponeHandler=function(e,t,n){return null==t?(console.error("命令为【"+e+"】设置响应处理程序错误"),!1):(this._listener[e]=[{target:n,callback:t}],!0)},n.addResponeHandler=function(e,t,n){if(null==t)return console.error("命令为【"+e+"】添加响应处理程序错误"),!1;var s={target:n,callback:t};null==this._listener[e]?this._listener[e]=[s]:-1==this.getNetListenersIndex(e,s)&&this._listener[e].push(s);return!0},n.removeResponeHandler=function(e,t,n){if(null!=this._listener[e]&&null!=t){var s=this.getNetListenersIndex(e,{target:n,callback:t});-1!=s&&this._listener[e].splice(s,1)}},n.cleanListeners=function(e){void 0===e&&(e=""),""==e?this._listener={}:delete this._listener[e]},n.getNetListenersIndex=function(e,t){for(var n=-1,s=0;s<this._listener[e].length;s++){var i=this._listener[e][s];if(i.callback==t.callback&&i.target==t.target){n=s;break}}return n},n.setHearbeatTime=function(e){void 0===e&&(e=5e3),e>0&&(this._heartTime=e)},n.resetReceiveMsgTimer=function(){var e=this;null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((function(){console.warn("接收消息定时器关闭网络连接"),e._socket.close()}),this._receiveTime)},n.resetHearbeatTimer=function(){var e=this;null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this.setHearbeatTime(),this._keepAliveTimer=setInterval((function(){var t=e._protocolHelper.getHearbeat();e.send(JSON.stringify(t))}),this._heartTime)},n.clearTimer=function(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)},n.isAutoReconnect=function(){return 0!=this._autoReconnect},n.rejectReconnect=function(){this._autoReconnect=0,this.clearTimer()},e}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/WebsocketTips.ts",["cc","./HeronApp.ts","./PromptManager.ts"],(function(n){var e,o,t;return{setters:[function(n){e=n.cclegacy},function(n){o=n.HeronApp},function(n){t=n.prompt}],execute:function(){e._RF.push({},"d03a64nR95Emq3xx7rTWnWd","WebsocketTips",void 0);n("WebsocketTips",function(){function n(){}var e=n.prototype;return e.init=function(){},e.connectTips=function(n){o.log.logView("是否显示连接提示："+n)},e.reconnectTips=function(n){o.log.logView("是否显示重连提示："+n),n?t.netReconnectOpen():t.netReconnectClose()},e.requestTips=function(n){o.log.logView("是否显示请求提示："+n)},e.responseErrorCode=function(n){o.log.logView("游戏服务器错误码："+n)},e.connectCloseTips=function(){o.log.logView("网络已断开:显示网络断开"),t.netReconnectOpen()},n}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});