System.register("chunks:///_virtual/bato",["./BatoEntry.ts","./BatoMsgCode.ts","./BatoNetDefine.ts","./BatoUIConfig.ts","./BatoCtrl.ts","./BatoModel.ts","./BatoGame.ts","./BatoLoading.ts","./Matching.ts","./pokerItem.ts","./player.ts","./pokerItemManage.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/BatoCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./BaseCtrl.ts","./BatoNetDefine.ts"],(function(e){var t,o,s,n,i;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){s=e.HeronApp},function(e){n=e.default},function(e){i=e.default}],execute:function(){o._RF.push({},"65d60hS6w1Cp4i6oHt5svP8","BatoCtrl",void 0);e("default",function(e){function o(t){var o;return(o=e.call(this,t)||this).model=void 0,o.model=t,o}t(o,e);var n=o.prototype;return n.init=function(){e.prototype.init.call(this)},n.onDestroy=function(){e.prototype.onDestroy.call(this)},n.registerHandler=function(){s.message.on(i.PLAYER_JOINED_MC,this),s.message.on(i.PLAYER_READY_RQ,this),s.message.on(i.PLAYER_UNRADY_RQ,this),s.message.on(i.GAME_START_RQ,this),e.prototype.registerHandler.call(this)},n.removeHandler=function(){s.message.off(i.PLAYER_JOINED_MC,this),s.message.off(i.PLAYER_READY_RQ,this),s.message.off(i.PLAYER_UNRADY_RQ,this),s.message.off(i.GAME_START_RQ,this),e.prototype.removeHandler.call(this)},n.dealData=function(t,o){switch(e.prototype.dealData.call(this,t,o),t){case i.PLAYER_JOINED_MC:console.log("+9++++++++1",o),this.model.playerJoined(o);break;case i.PLAYER_READY_RQ:console.log("+9++++++++2",o),this.model.isReady(o);break;case i.PLAYER_UNRADY_RQ:console.log("+9++++++++3",o),this.model.isReady(o);break;case i.GAME_START_RQ:console.log("+9++++++++4",o)}},n.onHandleEvent=function(t,o){var n,a;switch(e.prototype.onHandleEvent.call(this,t,o),t){case i.PLAYER_JOINED_MC:s.message.dispatchEvent(i.C_PLAYER_JOINED_MC);break;case i.PLAYER_READY_RQ:if((null==o?void 0:o.uid)==(null==(n=this.model.gameInfo)?void 0:n.player.uid)&&s.message.dispatchEvent(i.C_PLAYER_READY_RQ),(null==o?void 0:o.ready_count)>=2){s.webSocket.sendMsg(i.GAME_START_RQ,{action:"start_game",config:{max_rounds:8,win_threshold:5}})}break;case i.PLAYER_UNRADY_RQ:(null==o?void 0:o.uid)==(null==(a=this.model.gameInfo)||null==(a=a.player)?void 0:a.uid)&&s.message.dispatchEvent(i.C_PLAYER_UNRADY_RQ)}},o}(n));o._RF.pop()}}}));

System.register("chunks:///_virtual/BatoEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./BatoUIConfig.ts","./BatoModel.ts","./BatoCtrl.ts","./BatoMsgCode.ts","./BaseEntry.ts"],(function(t){var n,o,e,r,s,i,a,c,u,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator},function(t){r=t.HeronApp},function(t){s=t.BatoUIConfigData,i=t.BatoUIID},function(t){a=t.default},function(t){c=t.default},function(t){u=t.MsgInfo},function(t){l=t.BaseEntry}],execute:function(){var f;o._RF.push({},"6968fvEgcBE87a/LmMBQ7es","BatoEntry",void 0);var d=e.ccclass,g=(e.property,window);t("BatoEntry",d("BatoEntry")(f=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(n=t.call.apply(t,[this].concat(e))||this).model=a.getInstance(),n.ctrl=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){g.bundle="bato",r.netMsg.registerMsgCode(u,g.bundle),r.ui.initConfig(s),r.ui.open(i.batoLoading),this.ctrl=new c(this.model)},e.onDestroy=function(){this.model.destroy(),this.ctrl.onDestroy(),r.netMsg.removeMsgCode(g.bundle)},e.update=function(t){},o}(l))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/BatoGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./player.ts","./pokerItemManage.ts","./BatoModel.ts","./Matching.ts","./BatoNetDefine.ts"],(function(t){var e,n,i,o,a,r,s,l,h,u,c,d,f,g,p,m,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.Prefab,h=t.Label,u=t.instantiate,c=t.Component},function(t){d=t.HeronApp},function(t){f=t.player},function(t){g=t.pokerItemManage},function(t){p=t.default},function(t){m=t.Matching},function(t){v=t.default}],execute:function(){var C,y,b,w,k,R,L,I,_,P,D,A,E,G,Y,O,S;a._RF.push({},"f2369LiB/RMf60fFH654juk","BatoGame",void 0);var M=r.ccclass,B=r.property,z=p.getInstance();t("BatoGame",(C=M("BatoGame"),y=B(s),b=B(s),w=B(s),k=B(s),R=B(l),L=B(h),I=B(s),C((D=e((P=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"mask",D,o(e)),i(e,"left",A,o(e)),i(e,"right",E,o(e)),i(e,"countdown",G,o(e)),i(e,"playerPrefab",Y,o(e)),i(e,"roundLabel",O,o(e)),i(e,"matching",S,o(e)),e.roundCount=0,e.isDefault=!0,e.countdownInterval=null,e.playerList=[],e.lookOnPlayerList=[],e.RoundList=["1st\nRound","2nd\nRound","3rd\nRound","4th\nRound","5th\nRound","6th\nRound","7th\nRound","8th\nRound","Final\nClash"],e}n(e,t);var a=e.prototype;return a.start=function(){this.init()},a.onAdded=function(){d.message.on(v.C_PLAYER_JOINED_MC,this),d.message.on(v.C_PLAYER_READY_RQ,this),d.message.on(v.C_PLAYER_UNRADY_RQ,this),d.message.on("startGame",this),d.message.on("deskShowpoker",this),d.message.on("resultGame",this),d.message.on("winSpinaCall",this),d.message.on("gameOver",this),d.message.on("fenceOff",this)},a.onDestroy=function(){d.message.off(v.C_PLAYER_JOINED_MC,this),d.message.off(v.C_PLAYER_READY_RQ,this),d.message.off(v.C_PLAYER_UNRADY_RQ,this),d.message.off("initGame",this),d.message.off("startGame",this),d.message.off("deskShowpoker",this),d.message.off("resultGame",this),d.message.off("winSpinaCall",this),d.message.off("gameOver",this),d.message.off("fenceOff",this)},a.init=function(){var t;"waiting"==(null==(t=z.gameInfo)||null==(t=t.game_state)?void 0:t.status)&&(this.matching.active=!0,this.matching.getComponent(m).init())},a.gameinit=function(){var t,e,n=null==(t=z.gameInfo)?void 0:t.player;n?console.log("player有问题"):(this.matching=!1,this.roundLabel.string="1st\nRound","owner"==(null==(e=z.gameInfo)||null==(e=e.player)?void 0:e.role)?this.Datainit(this.left,this.right):"player"==n?this.Datainit(this.right,this.left):"spectator"==n?this.Datainit(this.left,this.right):this.Datainit(this.right,this.left))},a.Datainit=function(t,e){var n,i,o=this;t.setSiblingIndex(this.node.children.length-3),this.mask.setSiblingIndex(this.node.children.length-4),e.setSiblingIndex(this.node.children.length-5);var a=u(this.playerPrefab);t.addChild(a);var r=u(this.playerPrefab);e.addChild(r),a.getComponent(f).initPlayer(null==(n=z.gameInfo)?void 0:n.players[0]),r.getComponent(f).initPlayer(null==(i=z.gameInfo)?void 0:i.players[0]),setTimeout((function(){o.node.children[4].children[1].children[0].getComponent(g).dealPoker()}),1e3),this.playerList.push(a),this.playerList.push(r)},a.deskShowpoker=function(){var t;"owner"==(null==(t=z.gameInfo)||null==(t=t.player)?void 0:t.role)?(this.playerList[0].getComponent(f).poker=this.node.children[4].children[3].children[0],this.playerList[0].getComponent(f).pokerMove()):(this.playerList[1].getComponent(f).poker=this.node.children[4].children[3].children[0],this.playerList[1].getComponent(f).pokerMove())},a.startCountdown=function(t){var e=this;this.countdownInterval&&clearInterval(this.countdownInterval),this.countdown.active=!0,this.countdown.children[0].getComponent(h).string=""+t,this.countdownInterval=setInterval((function(){t--,e.countdown.children[0].getComponent(h).string=""+t,t<=0&&(clearInterval(e.countdownInterval),e.onCountdownComplete())}),1e3)},a.onCountdownComplete=function(){var t;this.isDefault&&(null==(t=z.gameInfo)||null==(t=t.player)?void 0:t.role)<2&&this.node.children[4].children[1].children[0].getComponent(g).defaultChoice()},a.stopCountdown=function(){null!==this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdown.active=!1,console.log("倒计时已停止"))},a.startGame=function(){var t;this.roundCount>7?this.roundLabel.string=this.RoundList[this.RoundList.length-1]:this.roundLabel.string=this.RoundList[this.roundCount],this.roundCount+=1,this.node.children[4].children[4].active=!1,this.startCountdown(10),(null==(t=z.gameInfo)||null==(t=t.player)?void 0:t.role)<2&&(this.mask.active=!0),this.node.children[4].children[1].children[0].getComponent(g).isActivePokerMaskNode(!1)},a.resultGame=function(){var t;(null==(t=z.gameInfo)||null==(t=t.player)?void 0:t.role)<2&&(this.mask.active=!1),this.countdown.active=!1,this.stopCountdown();for(var e=0;e<this.playerList.length;e++);},a.gameOver=function(){this.playerList.forEach((function(t){t.getComponent(f).hidePoker()})),this.left.children[0].destroy(),this.right.children[0].destroy(),this.countdown.active=!1,this.roundCount=0,this.roundLabel.string="",this.isDefault=!0,this.countdownInterval=null,this.playerList=[],this.lookOnPlayerList=[],this.node.children[4].children[1].children[0].getComponent(g).gameOver(),this.matching=!0},a.winSpinaCall=function(){},a.onHandleEvent=function(t,e){switch(t){case v.C_PLAYER_JOINED_MC:this.matching.getComponent(m).showAvatar();break;case v.C_PLAYER_READY_RQ:this.matching.getComponent(m).uptadaButton(!0);break;case v.C_PLAYER_UNRADY_RQ:this.matching.getComponent(m).uptadaButton(!1);case"initGame":this.init();break;case"startGame":this.startGame();break;case"deskShowpoker":this.deskShowpoker();break;case"resultGame":this.resultGame();break;case"winSpinaCall":this.winSpinaCall();break;case"gameOver":this.gameOver();break;case"fenceOff":this.node.children[4].children[1].children[0].getComponent(g).dealPokerInstantly()}},e}(c)).prototype,"mask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(P.prototype,"left",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(P.prototype,"right",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(P.prototype,"countdown",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(P.prototype,"playerPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(P.prototype,"roundLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(P.prototype,"matching",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=P))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/BatoLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts","./BaseLoading.ts","./BatoUIConfig.ts","./UIConfig2.ts"],(function(o){var n,t,a,i,c,e,u;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,a=o._decorator},function(o){i=o.HeronApp},function(o){c=o.BaseLoading},function(o){e=o.BatoUIID},function(o){u=o.COMMONUIID}],execute:function(){var s;t._RF.push({},"d9fbaJJSRZPzJI9R+J0PQby","BatoLoading",void 0);var r=a.ccclass;a.property,o("BatoLoading",r("BatoLoading")(s=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var a=t.prototype;return a.onLoad=function(){},a.playMusic=function(){},a.loadCustomRes=function(o){console.log("开始加载自定义资源"),o()},a.loadSuccess=function(){i.ui.replaceAsync(e.batoLoading,e.batoGame),i.ui.open(u.commonUI)},a.update=function(o){},t}(c))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/BatoModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseModel.ts"],(function(n){var e,i,t;return{setters:[function(n){e=n.inheritsLoose},function(n){i=n.cclegacy},function(n){t=n.default}],execute:function(){i._RF.push({},"7dbd45YlKRCgKKQytFCkDkH","BatoModel",void 0),n("default",function(n){function i(){return n.apply(this,arguments)||this}e(i,n),i.getInstance=function(){return this.instance=this.instance||new i,this.instance};var t=i.prototype;return t.init=function(){},i.destroy=function(){this.instance&&this.instance.destroy()},t.playerJoined=function(n){var e;return null==(e=this.gameInfo)||e.players.push(null==n?void 0:n.player),this.gameInfo},t.isReady=function(n){for(var e,i=(null==(e=this.gameInfo)?void 0:e.players)||[],t=0;t<i.length;t++){var s,l,o;if(i[t])i[t].is_ready=null!=(o=null==n?void 0:n.is_ready)?o:i[t].is_ready;if((null==(s=this.gameInfo)?void 0:s.players[t].uid)==(null==(l=this.gameInfo)?void 0:l.player.uid)){var a,r,u=null==(a=this.gameInfo)?void 0:a.player;if(u)u.is_ready=null!=(r=null==n?void 0:n.is_ready)?r:i[t].is_ready}}},i}(t)).instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/BatoMsgCode.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"c923726YYJFVLF0u+GOyl4+","BatoMsgCode",void 0);e("MsgInfo",{CodeToMsg:{29:"GamestartRq",72:"GamestartRs",36:"PlayerReadyRq",77:"PlayerReadyRs ",37:"PlayerUnreadyRq",78:"PlayerUnreadyRs",30:"GameActionRq",73:"GameActionRs",31:"GameStateRq",74:"GameStateRs",32:"GameEndRq",75:"GameEndRs",33:"GameEventRq",76:"GameEventRs",43:"RoundStartMc",46:"PlayerSelectCardRq",48:"PlayerSelectCardRs",49:"PlayerSelectCardMc"},MsgToCode:{GamestartRq:"29",GamestartRs:"72",PlayerReadyRq:"36",PlayerReadyRs:"77",PlayerUnreadyRq:"37",PlayerUnreadyRs:"78",GameActionRq:"30",GameActionRs:"73",GameStateRq:"31",GameStateRs:"74",GameEndRq:"32",GameEndRs:"75",GameEventRq:"33",GameEventRs:"76",RoundStartMc:"43",PlayerSelectCardRq:"46",PlayerSelectCardRs:"48",PlayerSelectCardMc:"49"},MapTable:{72:"29",77:"36",78:"37",73:"30",74:"31",75:"32",76:"33",43:"43",48:"46",49:"49"}});a._RF.pop()}}}));

System.register("chunks:///_virtual/BatoNetDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetDefine.ts"],(function(_){var R,E,e;return{setters:[function(_){R=_.inheritsLoose},function(_){E=_.cclegacy},function(_){e=_.default}],execute:function(){E._RF.push({},"a2774CkIodEDIhtr/Z3ROf7","BatoNetDefine",void 0);var A=_("default",function(_){function E(){return _.apply(this,arguments)||this}return R(E,_),E}(e));A.GAME_START_RQ="GamestartRq",A.PLAYER_READY_RQ="PlayerReadyRq",A.PLAYER_UNRADY_RQ="PlayerUnreadyRq",A.GAME_ACTION_RQ="GameActionRq",A.GAME_STATE_RQ="GameStateRq",A.GAME_END_RQ="GameEndRq",A.GAME_EVENT_RQ="GameEventRq",A.ROUND_START_MC="RoundStartMc",A.PLAYER_SELECT_CARD_RQ="PlayerSelectCardRq",A.PLAYER_SELECTCARD_MC="PlayerSelectCardMc",A.C_PLAYER_JOINED_MC="C_PLAYER_JOINED_MC",A.C_PLAYER_UNRADY_RQ="C_PLAYER_UNRADY_RQ",A.C_PLAYER_READY_RQ="C_PLAYER_READY_RQ",A.C_GAME_ACTION_RQ="C_GAME_ACTION_RQ",A.C_GAME_STATE_RQ="C_GAME_STATE_RQ",A.C_GAME_END_RQ="C_GAME_END_RQ",A.C_GAME_EVENT_RQ="C_GAME_EVENT_RQ",A.C_ROUND_START_MC="C_ROUND_START_MC",E._RF.pop()}}}));

System.register("chunks:///_virtual/BatoUIConfig.ts",["cc","./LayerEnum.ts"],(function(a){var t,o;return{setters:[function(a){t=a.cclegacy},function(a){o=a.LayerType}],execute:function(){var e;t._RF.push({},"e873bbQNOVKBbVCZLzWWw3F","BatoUIConfig",void 0);var n=a("BatoUIID",function(a){return a[a.batoLoading=20001]="batoLoading",a[a.batoGame=20002]="batoGame",a}({}));a("BatoUIConfigData",((e={})[n.batoLoading]={layer:o.UI,prefab:"ui/batoLoading",bundle:"bato"},e[n.batoGame]={layer:o.UI,prefab:"ui/batoGame",bundle:"bato"},e));t._RF.pop()}}}));

System.register("chunks:///_virtual/Matching.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BatoModel.ts","./HeronApp.ts","./BatoNetDefine.ts"],(function(t){var e,n,a,i,r,o,l,u,c,s,p,f,v,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Node,u=t.SpriteFrame,c=t.Button,s=t.Sprite,p=t.Component},function(t){f=t.default},function(t){v=t.HeronApp},function(t){g=t.default}],execute:function(){var h,d,y,b,m,B,w,I,R,_,A,C,L,S,M;r._RF.push({},"e35e656zI9BnLpN8OIQe+o7","Matching",void 0);var k=o.ccclass,z=o.property;t("Matching",(h=k("Matching"),d=z(l),y=z(l),b=z(l),m=z(l),B=z(l),w=z(u),h((_=e((R=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"avatarLeft",_,i(e)),a(e,"avatarRight",A,i(e)),a(e,"startButton",C,i(e)),a(e,"readButton",L,i(e)),a(e,"cancelButton",S,i(e)),a(e,"avatarSprite",M,i(e)),e}n(e,t);var r=e.prototype;return r.init=function(){var t,e;if(console.log(f.getInstance().gameInfo.player.role),"owner"==(null==(t=f.getInstance().gameInfo)||null==(t=t.player)?void 0:t.role))this.showAvatar();else if("player"==(null==(e=f.getInstance().gameInfo)||null==(e=e.player)?void 0:e.role))this.showAvatar();else{var n;if((null==(n=f.getInstance().gameInfo)?void 0:n.players.length)>0)for(var a=0;a<(null==(i=f.getInstance().gameInfo)?void 0:i.players.length);a++){var i,r;"owner"==(null==(r=f.getInstance().gameInfo)||null==(r=r.players[a])?void 0:r.role)?this.avatarLeft.getComponent(c).enabled=!1:this.avatarRight.getComponent(c).enabled=!1}}},r.avatarLeftClick=function(){},r.avatarRighttClick=function(){},r.startGameClick=function(){v.webSocket.sendMsg(g.GAME_START_RQ,{action:"start_game",config:{max_rounds:8,win_threshold:5}})},r.uptadaButton=function(t){t?(this.readButton.active=!1,this.cancelButton.active=!0):(this.readButton.active=!0,this.cancelButton.active=!1)},r.readybuttonClick=function(){v.webSocket.sendMsg(g.PLAYER_READY_RQ,{})},r.UnreadybuttonClick=function(){v.webSocket.sendMsg(g.PLAYER_UNRADY_RQ,{})},r.showAvatar=function(){for(var t=f.getInstance().gameInfo,e=0;e<(null==t?void 0:t.players.length);e++){var n,a,i,r;if("owner"==(null==t?void 0:t.players[e].role))this.avatarLeft.getComponent(c).enabled=!1,this.avatarLeft.getComponent(s).spriteFrame=this.avatarSprite,(null==t||null==(n=t.player)?void 0:n.uid)==(null==t||null==(a=t.players[e])?void 0:a.uid)&&(this.avatarLeft.children[0].active=!0),this.readButton.active=!0;else this.avatarRight.getComponent(c).enabled=!1,this.avatarRight.getComponent(s).spriteFrame=this.avatarSprite,(null==t||null==(i=t.player)?void 0:i.uid)==(null==t||null==(r=t.players[e])?void 0:r.uid)&&(this.avatarRight.children[0].active=!0),this.readButton.active=!0}},e}(p)).prototype,"avatarLeft",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(R.prototype,"avatarRight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(R.prototype,"startButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"readButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(R.prototype,"cancelButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(R.prototype,"avatarSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=R))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts"],(function(e){var t,i,o,r,n,s,p,a,h,l,c,u,d,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,p=e.Node,a=e.SpriteFrame,h=e.Vec3,l=e.Sprite,c=e.Label,u=e.tween,d=e.v3,g=e.Component},function(e){m=e.HeronApp}],execute:function(){var b,N,f,y,w,v,P,F,k,S,z,C,V,x,B,H,I,L,A;n._RF.push({},"916a5ZSSRVBCL8h7sjvSBfp","player",void 0);var R=s.ccclass,D=s.property,_=(e("player",(b=R("player"),N=D(p),f=D(p),y=D(a),w=D(a),v=D(a),P=D(a),F=D(a),k=D(a),b((C=t((z=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,o(t,"personageNode",C,r(t)),o(t,"hpNode",V,r(t)),o(t,"headHpBgSpriteFrames",x,r(t)),o(t,"headHpItemSpriteFrames",B,r(t)),o(t,"pokerImgs",H,r(t)),o(t,"personageSpriteFrames",I,r(t)),o(t,"headSpriteFrames",L,r(t)),o(t,"hpBgSpriteFrames",A,r(t)),t.poker=null,t.isHouseOwner=!1,t.startPos=null,t}i(t,e);var n=t.prototype;return n.initPlayer=function(e){var t=this;if(this.hpNode.children[0].getComponent(l).spriteFrame=this.headHpBgSpriteFrames[e.tableNumber],this.hpNode.children[0].children[0].children.forEach((function(i){i.getComponent(l).spriteFrame=t.headHpItemSpriteFrames[e.tableNumber]})),this.personageNode.getComponent(l).spriteFrame=this.personageSpriteFrames[e.tableNumber],this.hpNode.children[0].children[1].getComponent(l).spriteFrame=this.headSpriteFrames[e.tableNumber],this.hpNode.children[1].children[0].getComponent(l).spriteFrame=this.hpBgSpriteFrames[e.tableNumber],this.personageNode.position=new h(_.playerPos[e.tableNumber].playerPrefabVec3),this.hpNode.position=new h(_.playerPos[e.tableNumber].hpPrefabVec3),this.hpNode.children[1].children[0].position=new h(_.playerPos[e.tableNumber].hpBgPrefabVec3),this.hpNode.children[1].children[2].position=new h(_.playerPos[e.tableNumber].heartVec3),this.hpNode.children[1].children[1].position=new h(_.playerPos[e.tableNumber].hpLabel),0==e.tableNumber){this.hpNode.children[1].children[1].getComponent(c).string="x "+e.hp;var i=this.hpNode.position.clone();this.hpNode.position=new h(this.hpNode.position.x-400,this.hpNode.position.y,this.hpNode.position.z),u(this.hpNode).to(.5,{position:i}).start();var o=this.personageNode.position.clone();this.personageNode.position=new h(this.personageNode.position.x-400,this.personageNode.position.y,this.personageNode.position.z),u(this.personageNode).to(.5,{position:o}).start(),this.isHouseOwner=!0}else{var r=this.hpNode.position.clone();this.hpNode.position=new h(this.hpNode.position.x+400,this.hpNode.position.y,this.hpNode.position.z),u(this.hpNode).to(.5,{position:r}).start();var n=this.personageNode.position.clone();this.personageNode.position=new h(this.personageNode.position.x+400,this.personageNode.position.y,this.personageNode.position.z),u(this.personageNode).to(.5,{position:n}).start(),this.hpNode.children[1].children[1].getComponent(c).string=e.hp+" x"}},n.pokerMove=function(){var e=0;e=this.personageNode.x>0?-90:130,this.poker.active=!0,this.poker.position=new h(this.personageNode.x,this.personageNode.position.y+42,0);var t=new h(this.poker.position.x+e,this.poker.position.y,0);u(this.poker).to(.3,{position:t}).start()},n.showResult=function(e){},n.playPokerRevealAnimation=function(e){var t=this,i=this.poker.getComponent(l);u(this.poker).stop(),this.poker.setRotationFromEuler(0,0,0),this.startPos=this.poker.position;var o=d(this.startPos.x,this.startPos.y+130,this.startPos.z);u(this.poker).to(.8,{position:o},{easing:"cubicOut"}).start();u(this.poker).to(.8,{eulerAngles:d(0,720,0)},{easing:"linear"}).to(.5,{eulerAngles:d(0,1080,0)},{easing:"linear"}).call((function(){i.spriteFrame=t.pokerImgs[e.pokerId-1],0==e.result?t.win():2==e.result&&setTimeout((function(){t.hidePoker()}),1e3)})).start()},n.hidePoker=function(){this.poker.getComponent(l).spriteFrame=this.pokerImgs[3],this.poker.position=this.startPos,this.poker.active=!1},n.win=function(){setTimeout((function(){m.message.dispatchEvent("winSpinaCall")}),1e3)},n.lose=function(e,t){0==t.tableNumber?this.hpNode.children[1].children[1].getComponent(c).string="x"+t.hp:this.hpNode.children[1].children[1].getComponent(c).string=t.hp+"x";var i=this.hpNode.children[0].children[0].children,o=i.filter((function(e){return e.active})),r=e.hp,n=Math.min(r,o.length);if(0!==n)for(var s=0,p=function(e){var t=o[e];u(t).delay(s).to(.2,{scale:new h(1.4,1.4,1)}).call((function(){})).to(.2,{scale:new h(1,1,1)}).call((function(){(t.active=!1,e===n-1)&&(i.some((function(e){return e.active}))||console.log("玩家已没有剩余血量！"))})).start(),s+=.3},a=0;a<n;a++)p(a)},t}(g)).prototype,"personageNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"hpNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"headHpBgSpriteFrames",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(z.prototype,"headHpItemSpriteFrames",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=t(z.prototype,"pokerImgs",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(z.prototype,"personageSpriteFrames",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(z.prototype,"headSpriteFrames",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(z.prototype,"hpBgSpriteFrames",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=z))||S)),e("PlayerPosDefine",(function(){})));_.playerPos=[{playerPrefabVec3:new h(-202,-32,0),hpPrefabVec3:new h(-173,400,0),hpBgPrefabVec3:new h(-12,-75,0),heartVec3:new h(-9,-82,0),hpLabel:new h(40.185,-75.148,0)},{playerPrefabVec3:new h(198,-32,0),hpPrefabVec3:new h(170,400,0),hpBgPrefabVec3:new h(16.546,-75,0),heartVec3:new h(15,-82,0),hpLabel:new h(-35.815,-75.148,0)}],n._RF.pop()}}}));

System.register("chunks:///_virtual/pokerItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeronApp.ts"],(function(e){var t,o,r,n,i,a;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,n=e.Sprite,i=e.Component},function(e){a=e.HeronApp}],execute:function(){var p;o._RF.push({},"071c0wAK7BLIq7G6M4wDG/O","pokerItem",void 0);var s=r.ccclass;r.property,e("pokerItem",s("pokerItem")(p=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).pokerData=0,t.pokerimg=null,t.pokerItemManage=void 0,t}t(o,e);var r=o.prototype;return r.initData=function(e,t){this.pokerimg=e,this.pokerData=t},r.showData=function(){this.node.getComponent(n).spriteFrame=this.pokerimg},r.clickButton=function(){a.message.dispatchEvent("pokerButton"),this.pokerItemManage.isActivePokerMaskNode(!0),this.pokerItemManage.returnPokerToPool(this.node,"HandCardPool")},r.Clear=function(){this.pokerData=0,this.pokerimg=null,this.pokerItemManage=null},o}(i))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/pokerItemManage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./player.ts","./pokerItem.ts"],(function(e){var t,r,o,n,a,i,l,s,p,c,u,h,P,f,k,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,l=e.Prefab,s=e.Node,p=e.SpriteFrame,c=e.instantiate,u=e.tween,h=e.v3,P=e.Sprite,f=e.Vec3,k=e.Component},function(e){d=e.PlayerPosDefine},function(e){g=e.pokerItem}],execute:function(){var m,y,v,b,C,I,O,M,_,A,D;a._RF.push({},"784d2XrdQVF3rhBoc8bB4tH","pokerItemManage",void 0);var w=i.ccclass,N=i.property;e("pokerItemManage",(m=w("pokerItemMag"),y=N(l),v=N(s),b=N(s),C=N(p),m((M=t((O=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,o(t,"pokerItem",M,n(t)),o(t,"pokerMaskNode",_,n(t)),o(t,"pokerStart",A,n(t)),o(t,"pokerImgs",D,n(t)),t.pools=new Map,t}r(t,e);var a=t.prototype;return a.getOrCreatePool=function(e){return this.pools.has(e)||this.pools.set(e,[]),this.pools.get(e)},a.getPokerFromPool=function(e){var t=this.getOrCreatePool(e);return t.length>0?t.pop():c(this.pokerItem)},a.returnPokerToPool=function(e,t){var r;u(e).stop(),e.setScale(h(1,1,1)),e.setPosition(h(0,0,0)),null==(r=e.getComponent(g))||r.Clear(),e.removeFromParent(),this.getOrCreatePool(t).push(e)},a.dealPoker=function(){for(var e=this,t=[],r=0;r<16;r++){var o=this.getPokerFromPool("ANIM_CARD_POOL");o.getComponent(P).spriteFrame=this.pokerImgs[0],o.setPosition(new f(0,0,0)),o.setScale(.6,.6,.6),this.pokerStart.addChild(o),t.push(o)}for(var n=0,a=t.reverse(),i=function(){var t=a[l],r=a[l+1];if(!r)return 1;var o=new f(d.playerPos[0].playerPrefabVec3.x,d.playerPos[0].playerPrefabVec3.y-50,d.playerPos[0].playerPrefabVec3.z),i=new f(d.playerPos[1].playerPrefabVec3.x,d.playerPos[1].playerPrefabVec3.y-50,d.playerPos[1].playerPrefabVec3.z);u(t).delay(n).to(.2,{position:o,scale:new f(.8,.8,.8)}).call((function(){e.returnPokerToPool(t,"ANIM_CARD_POOL")})).start(),u(r).delay(n).to(.2,{position:i,scale:new f(.8,.8,.8)}).call((function(){e.returnPokerToPool(r,"ANIM_CARD_POOL")})).start(),n+=.2},l=0;l<a.length;l+=2)i();u(this.node).delay(n).call((function(){var t;null!=(t=e.node.parent)&&null!=(t=t.parent)&&t.children[4]&&(e.node.parent.parent.children[4].active=!0)})).start()},a.dealPokerInstantly=function(){this.isActivePokerMaskNode(!0);for(var e=[],t=0;t<e.length;t++){var r=this.getPokerFromPool("HAND_CARD_POOL");r.getComponent(g).initData(this.pokerImgs[e[t]],e[t]),r.getComponent(g).showData(),r.getComponent(g).pokerItemManage=this,this.node.addChild(r),r.setScale(h(0,0,0)),u(r).to(1,{scale:h(1,1,1)},{easing:"backOut"}).start()}},a.isActivePokerMaskNode=function(e){this.pokerMaskNode.active=e},a.defaultChoice=function(){var e;this.node.children.length>0&&(null==(e=this.node.children[0].getComponent(g))||e.clickButton())},a.gameOver=function(){for(;this.node.children.length>0;)this.returnPokerToPool(this.node.children[0],"HAND_CARD_POOL");for(;this.pokerStart.children.length>0;)this.returnPokerToPool(this.pokerStart.children[0],"ANIM_CARD_POOL")},t}(k)).prototype,"pokerItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(O.prototype,"pokerMaskNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(O.prototype,"pokerStart",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(O.prototype,"pokerImgs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=O))||I));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/bato', 'chunks:///_virtual/bato'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});